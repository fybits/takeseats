function t(t,e,i,r){Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var i=globalThis.parcelRequire4692,r=i.register;r("3AoPf",function(t,e){var r=i("eVz1R"),s=i("c9r7l"),a=i("6jyhb");(0,r.extensions).add(s.ResizePlugin),(0,r.extensions).add(a.TickerPlugin)}),r("c9r7l",function(e,r){t(e.exports,"ResizePlugin",()=>a);var s=i("eVz1R");class a{static init(t){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{let t,e;if(this._resizeTo){if(this._cancelResize(),this._resizeTo===globalThis.window)t=globalThis.innerWidth,e=globalThis.innerHeight;else{let{clientWidth:i,clientHeight:r}=this._resizeTo;t=i,e=r}this.renderer.resize(t,e),this.render()}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}a.extension=s.ExtensionType.Application}),r("6jyhb",function(e,r){t(e.exports,"TickerPlugin",()=>o);var s=i("eVz1R"),a=i("gu9S0"),n=i("1WaK0");class o{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,a.UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?n.Ticker.shared:new n.Ticker,t.autoStart&&this.start()}static destroy(){if(this._ticker){let t=this._ticker;this.ticker=null,t.destroy()}}}o.extension=s.ExtensionType.Application}),r("gu9S0",function(e,i){t(e.exports,"UPDATE_PRIORITY",()=>s);var r,s=((r=s||{})[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r)}),r("1WaK0",function(e,r){t(e.exports,"Ticker",()=>o);var s=i("gu9S0"),a=i("aUStc");let n=class t{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new a.TickerListener(null,null,1/0),this.deltaMS=1/t.targetFPMS,this.elapsedMS=1/t.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=s.UPDATE_PRIORITY.NORMAL){return this._addListener(new a.TickerListener(t,e,i))}addOnce(t,e,i=s.UPDATE_PRIORITY.NORMAL){return this._addListener(new a.TickerListener(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let i;if(e>this.lastTime){if((i=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){let t=e-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=e-t%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*t.targetFPMS;let r=this._head,s=r.next;for(;s;)s=s.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let i=Math.min(Math.max(0,Math.min(this.maxFPS,e))/1e3,t.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{let e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!t._shared){let e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared}static get system(){if(!t._system){let e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system}};n.targetFPMS=.06;let o=n}),r("aUStc",function(e,i){t(e.exports,"TickerListener",()=>r);class r{constructor(t,e=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=r}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));let e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let e=this.next;return this.next=t?null:e,this.previous=null,e}}}),r("ipkVP",function(t,e){var r=i("eVz1R"),s=i("bHBRz");(0,r.extensions).add(s.spritesheetAsset)}),r("bHBRz",function(e,r){t(e.exports,"spritesheetAsset",()=>c);var s=i("kuLtH"),a=i("Lmcdo"),n=i("kY7V1"),o=i("eVz1R"),l=i("5h88T"),h=i("kaDu9"),u=i("2v83S");let d=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"],c={extension:o.ExtensionType.Asset,cache:{test:t=>t instanceof u.Spritesheet,getCacheableAssets:(t,e)=>(function t(e,i,r){let s={};if(e.forEach(t=>{s[t]=i}),Object.keys(i.textures).forEach(t=>{s[t]=i.textures[t]}),!r){let r=(0,h.path).dirname(e[0]);i.linkedSheets.forEach((e,a)=>{Object.assign(s,t([`${r}/${i.data.meta.related_multi_packs[a]}`],e,!0))})}return s})(t,e,!1)},resolver:{test:t=>{let e=t.split("?")[0].split("."),i=e.pop(),r=e.pop();return"json"===i&&d.includes(r)},parse:t=>{let e=t.split(".");return{resolution:parseFloat(a.Resolver.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:o.ExtensionType.LoadParser,priority:s.LoaderParserPriority.Normal},testParse:async(t,e)=>".json"===(0,h.path).extname(e.src).toLowerCase()&&!!t.frames,async parse(t,e,i){let r;let{texture:s,imageFilename:a}=e?.data??{},o=(0,h.path).dirname(e.src);if(o&&o.lastIndexOf("/")!==o.length-1&&(o+="/"),s instanceof l.Texture)r=s;else{let s=(0,n.copySearchParams)(o+(a??t.meta.image),e.src);r=(await i.load([s]))[s]}let d=new u.Spritesheet(r.source,t);await d.parse();let c=t?.meta?.related_multi_packs;if(Array.isArray(c)){let t=[];for(let r of c){if("string"!=typeof r)continue;let s=o+r;e.data?.ignoreMultiPack||(s=(0,n.copySearchParams)(s,e.src),t.push(i.load({src:s,data:{ignoreMultiPack:!0}})))}let r=await Promise.all(t);d.linkedSheets=r,r.forEach(t=>{t.linkedSheets=[d].concat(d.linkedSheets.filter(e=>e!==t))})}return d},async unload(t,e,i){await i.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}}}),r("kuLtH",function(e,i){t(e.exports,"LoaderParserPriority",()=>s);var r,s=((r=s||{})[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r)}),r("Lmcdo",function(e,r){t(e.exports,"Resolver",()=>h);var s=i("8CF4q"),a=i("kaDu9"),n=i("lbclP"),o=i("ahHFV"),l=i("6BHki");class h{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){"string"==typeof t?this._defaultSearchParams=t:this._defaultSearchParams=Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}getAlias(t){let{alias:e,src:i}=t;return(0,n.convertToList)(e||i,t=>"string"==typeof t?t:Array.isArray(t)?t.map(t=>t?.src??t):t?.src?t.src:t,!0)}addManifest(t){this._manifest&&(0,s.warn)("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(t,e){let i=[],r=e;Array.isArray(e)||(r=Object.entries(e).map(([t,e])=>"string"==typeof e||Array.isArray(e)?{alias:t,src:e}:{alias:t,...e})),r.forEach(e=>{let r;let s=e.src,a=e.alias;if("string"==typeof a){let e=this._createBundleAssetId(t,a);i.push(e),r=[a,e]}else{let e=a.map(e=>this._createBundleAssetId(t,e));i.push(...e),r=[...a,...e]}this.add({...e,alias:r,src:s})}),this._bundles[t]=i}add(t){let e;let i=[];Array.isArray(t)?i.push(...t):i.push(t),e=t=>{this.hasKey(t)&&(0,s.warn)(`[Resolver] already has key: ${t} overwriting`)},(0,n.convertToList)(i).forEach(t=>{let{src:i}=t,{data:r,format:s,loadParser:a}=t,l=(0,n.convertToList)(i).map(t=>"string"==typeof t?(0,o.createStringVariations)(t):Array.isArray(t)?t:[t]),h=this.getAlias(t);Array.isArray(h)?h.forEach(e):e(h);let u=[];l.forEach(t=>{t.forEach(t=>{let e={};if("object"!=typeof t){e.src=t;for(let i=0;i<this._parsers.length;i++){let r=this._parsers[i];if(r.test(t)){e=r.parse(t);break}}}else r=t.data??r,s=t.format??s,a=t.loadParser??a,e={...e,...t};if(!h)throw Error(`[Resolver] alias is undefined for this asset: ${e.src}`);e=this._buildResolvedAsset(e,{aliases:h,data:r,format:s,loadParser:a}),u.push(e)})}),h.forEach(t=>{this._assetMap[t]=u})})}resolveBundle(t){let e=(0,l.isSingleItem)(t);t=(0,n.convertToList)(t);let i={};return t.forEach(t=>{let e=this._bundles[t];if(e){let r=this.resolve(e),s={};for(let e in r){let i=r[e];s[this._extractAssetIdFromBundle(t,e)]=i}i[t]=s}}),e?i[t[0]]:i}resolveUrl(t){let e=this.resolve(t);if("string"!=typeof t){let t={};for(let i in e)t[i]=e[i].src;return t}return e.src}resolve(t){let e=(0,l.isSingleItem)(t);t=(0,n.convertToList)(t);let i={};return t.forEach(t=>{if(!this._resolverHash[t]){if(this._assetMap[t]){let e=this._assetMap[t],i=this._getPreferredOrder(e);i?.priority.forEach(t=>{i.params[t].forEach(i=>{let r=e.filter(e=>!!e[t]&&e[t]===i);r.length&&(e=r)})}),this._resolverHash[t]=e[0]}else this._resolverHash[t]=this._buildResolvedAsset({alias:[t],src:t},{})}i[t]=this._resolverHash[t]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){let e=t[0],i=this._preferredOrder.find(t=>t.params.format.includes(e.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;let e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}_buildResolvedAsset(t,e){let{aliases:i,data:r,loadParser:s,format:n}=e;return(this._basePath||this._rootPath)&&(t.src=(0,a.path).toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=s??t.loadParser,t.format=n??t.format??t.src.split(".").pop().split("?").shift().split("#").shift(),t}}h.RETINA_PREFIX=/@([0-9\.]+)x/}),r("kaDu9",function(e,r){t(e.exports,"path",()=>o);var s=i("5m2Qn");function a(t){if("string"!=typeof t)throw TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function n(t){return t.split("?")[0].split("#")[0]}let o={toPosix:t=>t.replace(RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/"),isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),isBlobUrl:t=>t.startsWith("blob:"),hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){a(t),t=this.toPosix(t);let e=/^file:\/\/\//.exec(t);if(e)return e[0];let i=/^[^/:]+:\/{0,2}/.exec(t);return i?i[0]:""},toAbsolute(t,e,i){if(a(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;let r=n(this.toPosix(e??(0,s.DOMAdapter).get().getBaseUrl())),l=n(this.toPosix(i??this.rootname(r)));return(t=this.toPosix(t)).startsWith("/")?o.join(l,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(a(t),0===t.length)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="",i=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));let r=t.endsWith("/");return((t=function(t,e){let i="",r=0,s=-1,a=0,n=-1;for(let o=0;o<=t.length;++o){if(o<t.length)n=t.charCodeAt(o);else if(47===n)break;else n=47;if(47===n){if(s===o-1||1===a);else if(s!==o-1&&2===a){if(i.length<2||2!==r||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2)){if(i.length>2){let t=i.lastIndexOf("/");if(t!==i.length-1){-1===t?(i="",r=0):r=(i=i.slice(0,t)).length-1-i.lastIndexOf("/"),s=o,a=0;continue}}else if(2===i.length||1===i.length){i="",r=0,s=o,a=0;continue}}e&&(i.length>0?i+="/..":i="..",r=2)}else i.length>0?i+=`/${t.slice(s+1,o)}`:i=t.slice(s+1,o),r=o-s-1;s=o,a=0}else 46===n&&-1!==a?++a:a=-1}return i}(t,!1)).length>0&&r&&(t+="/"),i)?`/${t}`:e+t},isAbsolute(t){return a(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){let e;if(0===t.length)return".";for(let i=0;i<t.length;++i){let r=t[i];if(a(r),r.length>0){if(void 0===e)e=r;else{let s=t[i-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}}return void 0===e?".":this.normalize(e)},dirname(t){if(a(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0),i=47===e,r=-1,s=!0,n=this.getProtocol(t),o=t;t=t.slice(n.length);for(let i=t.length-1;i>=1;--i)if(47===(e=t.charCodeAt(i))){if(!s){r=i;break}}else s=!1;return -1===r?i?"/":this.isUrl(o)?n+t:n:i&&1===r?"//":n+t.slice(0,r)},rootname(t){a(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){let i=t.indexOf("/",e.length);(e=-1!==i?t.slice(0,i):t).endsWith("/")||(e+="/")}return e},basename(t,e){let i;a(t),e&&a(e),t=n(this.toPosix(t));let r=0,s=-1,o=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let a=e.length-1,n=-1;for(i=t.length-1;i>=0;--i){let l=t.charCodeAt(i);if(47===l){if(!o){r=i+1;break}}else -1===n&&(o=!1,n=i+1),a>=0&&(l===e.charCodeAt(a)?-1==--a&&(s=i):(a=-1,s=n))}return r===s?s=n:-1===s&&(s=t.length),t.slice(r,s)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!o){r=i+1;break}}else -1===s&&(o=!1,s=i+1);return -1===s?"":t.slice(r,s)},extname(t){a(t),t=n(this.toPosix(t));let e=-1,i=0,r=-1,s=!0,o=0;for(let a=t.length-1;a>=0;--a){let n=t.charCodeAt(a);if(47===n){if(!s){i=a+1;break}continue}-1===r&&(s=!1,r=a+1),46===n?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1)}return -1===e||-1===r||0===o||1===o&&e===r-1&&e===i+1?"":t.slice(e,r)},parse(t){let e;a(t);let i={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return i;let r=(t=n(this.toPosix(t))).charCodeAt(0),s=this.isAbsolute(t);i.root=this.rootname(t),e=s||this.hasProtocol(t)?1:0;let o=-1,l=0,h=-1,u=!0,d=t.length-1,c=0;for(;d>=e;--d){if(47===(r=t.charCodeAt(d))){if(!u){l=d+1;break}continue}-1===h&&(u=!1,h=d+1),46===r?-1===o?o=d:1!==c&&(c=1):-1!==o&&(c=-1)}return -1===o||-1===h||0===c||1===c&&o===h-1&&o===l+1?-1!==h&&(0===l&&s?i.base=i.name=t.slice(1,h):i.base=i.name=t.slice(l,h)):(0===l&&s?(i.name=t.slice(1,o),i.base=t.slice(1,h)):(i.name=t.slice(l,o),i.base=t.slice(l,h)),i.ext=t.slice(o,h)),i.dir=this.dirname(t),i},sep:"/",delimiter:":",joinExtensions:[".html"]}}),r("lbclP",function(e,i){t(e.exports,"convertToList",()=>r);let r=(t,e,i=!1)=>(Array.isArray(t)||(t=[t]),e)?t.map(t=>"string"==typeof t||i?e(t):t):t}),r("ahHFV",function(e,i){t(e.exports,"createStringVariations",()=>r);function r(t){let e=t.match(/\{(.*?)\}/g),i=[];if(e){let r=[];e.forEach(t=>{let e=t.substring(1,t.length-1).split(",");r.push(e)}),function t(e,i,r,s,a){let n=i[r];for(let o=0;o<n.length;o++){let l=n[o];r<i.length-1?t(e.replace(s[r],l),i,r+1,s,a):a.push(e.replace(s[r],l))}}(t,r,0,e,i)}else i.push(t);return i}}),r("6BHki",function(e,i){t(e.exports,"isSingleItem",()=>r);let r=t=>!Array.isArray(t)}),r("kY7V1",function(e,i){t(e.exports,"copySearchParams",()=>r);let r=(t,e)=>{let i=e.split("?")[1];return i&&(t+=`?${i}`),t}}),r("2v83S",function(e,r){t(e.exports,"Spritesheet",()=>o);var s=i("soqVu"),a=i("5h88T");let n=class t{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof a.Texture?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;let i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let i=e,r=t.BATCH_SIZE;for(;i-e<r&&i<this._frameKeys.length;){let t=this._frameKeys[i],e=this._frames[t],r=e.frame;if(r){let i=null,n=null,o=!1!==e.trimmed&&e.sourceSize?e.sourceSize:e.frame,l=new s.Rectangle(0,0,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution);i=e.rotated?new s.Rectangle(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):new s.Rectangle(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),!1!==e.trimmed&&e.spriteSourceSize&&(n=new s.Rectangle(Math.floor(e.spriteSourceSize.x)/this.resolution,Math.floor(e.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[t]=new a.Texture({source:this.textureSource,frame:i,orig:l,trim:n,rotate:e.rotated?2:0,defaultAnchor:e.anchor,defaultBorders:e.borders,label:t.toString()})}i++}}_processAnimations(){let t=this.data.animations||{};for(let e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){let r=t[e][i];this.animations[e].push(this.textures[r])}}}_parseComplete(){let t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*t.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(let t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};n.BATCH_SIZE=1e3;let o=n}),r("28YnR",function(t,e){var r=i("eVz1R"),s=i("jgXaH"),a=i("vwyRu"),n=i("lcq2f"),o=i("i8D1k"),l=i("2rfX3"),h=i("4XrO5"),u=i("c9SSH");i("i4n4u"),(0,r.extensions).add(s.AlphaMask,a.ColorMask,n.StencilMask,u.VideoSource,h.ImageSource,l.CanvasSource,o.BufferImageSource)}),r("jgXaH",function(e,r){t(e.exports,"AlphaMask",()=>l);var s=i("eVz1R"),a=i("9Qy7u"),n=i("kARrF"),o=i("kBq1a");class l{constructor(t){this.priority=0,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof a.Sprite),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){(0,n.addMaskBounds)(this.mask,t,e)}addLocalBounds(t,e){(0,o.addMaskLocalBounds)(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof a.Sprite}}l.extension=s.ExtensionType.MaskEffect}),r("kARrF",function(e,r){t(e.exports,"addMaskBounds",()=>o);var s=i("ggeMF"),a=i("dXx4G");let n=new s.Bounds;function o(t,e,i){t.measurable=!0,(0,a.getGlobalBounds)(t,i,n),e.addBoundsMask(n),t.measurable=!1}}),r("kBq1a",function(e,r){t(e.exports,"addMaskLocalBounds",()=>o);var s=i("5pskN"),a=i("96ND8"),n=i("8CF4q");function o(t,e,i){let r=(0,a.boundsPool).get();t.measurable=!0;let o=(0,a.matrixPool).get().identity(),l=function t(e,i,r){return e?e!==i&&(t(e.parent,i,r),e.updateLocalTransform(),r.append(e.localTransform)):(0,n.warn)("Mask bounds, renderable is not inside the root container"),r}(t,i,o);(0,s.getLocalBounds)(t,r,l),t.measurable=!1,e.addBoundsMask(r),(0,a.matrixPool).return(o),(0,a.boundsPool).return(r)}}),r("vwyRu",function(e,r){t(e.exports,"ColorMask",()=>a);var s=i("eVz1R");class a{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return"number"==typeof t}}a.extension=s.ExtensionType.MaskEffect}),r("lcq2f",function(e,r){t(e.exports,"StencilMask",()=>l);var s=i("eVz1R"),a=i("lR3Ev"),n=i("kARrF"),o=i("kBq1a");class l{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){(0,n.addMaskBounds)(this.mask,t,e)}addLocalBounds(t,e){(0,o.addMaskLocalBounds)(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof a.Container}}l.extension=s.ExtensionType.MaskEffect}),r("4XrO5",function(e,r){t(e.exports,"ImageSource",()=>l);var s=i("5m2Qn"),a=i("eVz1R"),n=i("8CF4q"),o=i("9Ur0D");class l extends o.TextureSource{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){let e=(0,s.DOMAdapter).get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0),t.resource=e,(0,n.warn)("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap}}l.extension=a.ExtensionType.TextureSource}),r("c9SSH",function(e,r){t(e.exports,"VideoSource",()=>h);var s=i("eVz1R"),a=i("1WaK0"),n=i("aG1Od"),o=i("9Ur0D");let l=class t extends o.TextureSource{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...t.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==e.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){let t=a.Ticker.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;let t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await (0,n.detectVideoAlphaMode)(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,void 0!==e.preloadTimeoutMs&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){let t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){let t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();let t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&((0,a.Ticker).shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||((0,a.Ticker).shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&((0,a.Ticker).shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||globalThis.VideoFrame&&t instanceof VideoFrame}};l.extension=s.ExtensionType.TextureSource,l.defaultOptions={...o.TextureSource.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},l.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let h=l}),r("aG1Od",function(e,i){let r;async function s(){return r??(r=(async()=>{let t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";let e=await new Promise(t=>{let e=document.createElement("video");e.onloadeddata=()=>t(e),e.onerror=()=>t(null),e.autoplay=!1,e.crossOrigin="anonymous",e.preload="auto",e.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",e.load()});if(!e)return"premultiply-alpha-on-upload";let i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);let r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);let s=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,s),t.deleteFramebuffer(r),t.deleteTexture(i),t.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),r}t(e.exports,"detectVideoAlphaMode",()=>s)}),r("i4n4u",function(t,e){var r=i("gYSnF"),s=i("eVz1R"),a=i("9Ur0D"),n=i("5h88T");let o=[];(0,s.extensions).handleByList(s.ExtensionType.TextureSource,o),n.Texture.from=function(t,e=!1){return"string"==typeof t?(0,r.Cache).get(t):t instanceof a.TextureSource?new n.Texture({source:t}):function(t={},e=!1){let i=t&&t.resource,s=i?t.resource:t,a=i?t:{resource:t};if(!e&&(0,r.Cache).has(s))return(0,r.Cache).get(s);let l=new n.Texture({source:function(t={}){let e=t&&t.resource,i=e?t.resource:t,r=e?t:{resource:t};for(let t=0;t<o.length;t++){let e=o[t];if(e.test(i))return new e(r)}throw Error(`Could not find a source type for resource: ${r.resource}`)}(a)});return l.on("destroy",()=>{(0,r.Cache).has(s)&&(0,r.Cache).remove(s)}),e||(0,r.Cache).set(s,l),l}(t,e)}}),r("gYSnF",function(e,r){t(e.exports,"Cache",()=>n);var s=i("8CF4q"),a=i("lbclP");let n=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){let e=this._cache.get(t);return e||(0,s.warn)(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){let i;let r=(0,a.convertToList)(t);for(let t=0;t<this.parsers.length;t++){let s=this.parsers[t];if(s.test(e)){i=s.getCacheableAssets(r,e);break}}let n=new Map(Object.entries(i||{}));i||r.forEach(t=>{n.set(t,e)});let o=[...n.keys()],l={cacheKeys:o,keys:r};r.forEach(t=>{this._cacheMap.set(t,l)}),o.forEach(t=>{let r=i?i[t]:e;this._cache.has(t)&&this._cache.get(t)!==r&&(0,s.warn)("[Cache] already has key:",t),this._cache.set(t,n.get(t))})}remove(t){if(!this._cacheMap.has(t)){(0,s.warn)(`[Assets] Asset id ${t} was not found in the Cache`);return}let e=this._cacheMap.get(t);e.cacheKeys.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})}get parsers(){return this._parsers}}}),r("aX86R",function(t,e){var r=i("eVz1R"),s=i("bBCDe"),a=i("g4d6y");(0,r.extensions).add(a.GraphicsPipe),(0,r.extensions).add(s.GraphicsContextSystem)}),r("bBCDe",function(e,r){t(e.exports,"GraphicsContextSystem",()=>f);var s=i("eVz1R"),a=i("h1qkv"),n=i("9q6W4"),o=i("gC5Pa"),l=i("vdXhX"),h=i("e98Fy"),u=i("03aVk");class d{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class c{constructor(){this.geometry=new a.BatchGeometry,this.instructions=new l.InstructionSet}init(){this.instructions.reset()}}let p=class t{constructor(){this._activeBatchers=[],this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._needsContextNeedsRebuild=[]}init(e){t.defaultOptions.bezierSmoothness=e?.bezierSmoothness??t.defaultOptions.bezierSmoothness}prerender(){this._returnActiveBatchers()}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),(0,u.buildContextBatches)(t,e);let i=t.batchMode;t.customShader||"no-batch"===i?e.isBatchable=!1:"auto"===i&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_returnActiveBatchers(){for(let t=0;t<this._activeBatchers.length;t++)(0,h.BigPool).return(this._activeBatchers[t]);this._activeBatchers.length=0}_initContextRenderData(t){let e=(0,h.BigPool).get(c),{batches:i,geometryData:r}=this._gpuContextHash[t.uid],s=r.vertices.length,a=r.indices.length;for(let t=0;t<i.length;t++)i[t].applyTransform=!1;let l=(0,h.BigPool).get(o.Batcher);this._activeBatchers.push(l),l.ensureAttributeBuffer(s),l.ensureIndexBuffer(a),l.begin();for(let t=0;t<i.length;t++){let e=i[t];l.add(e)}l.finish(e.instructions);let u=e.geometry;u.indexBuffer.setDataWithSize(l.indexBuffer,l.indexSize,!0),u.buffers[0].setDataWithSize(l.attributeBuffer.float32View,l.attributeSize,!0);let d=l.batches;for(let t=0;t<d.length;t++){let e=d[t];e.bindGroup=(0,n.getTextureBatchBindGroup)(e.textures.textures,e.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){let e=new d;return this._gpuContextHash[t.uid]=e,t.on("update",this.onGraphicsContextUpdate,this),t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextUpdate(t){this._needsContextNeedsRebuild.push(t)}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("update",this.onGraphicsContextUpdate,this),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){let e=this._gpuContextHash[t.uid];!e.isBatchable&&this._graphicsDataContextHash[t.uid]&&((0,h.BigPool).return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(t=>{(0,h.BigPool).return(t)})}destroy(){for(let t of this._needsContextNeedsRebuild)this._gpuContextHash[t.uid]&&this.onGraphicsContextDestroy(t);this._needsContextNeedsRebuild.length=0}};p.extension={type:[s.ExtensionType.WebGLSystem,s.ExtensionType.WebGPUSystem,s.ExtensionType.CanvasSystem],name:"graphicsContext"},p.defaultOptions={bezierSmoothness:.5};let f=p}),r("03aVk",function(e,r){t(e.exports,"buildContextBatches",()=>_);var s=i("soqVu"),a=i("cvBir"),n=i("5Mobi"),o=i("5h88T"),l=i("e98Fy"),h=i("7bQyz"),u=i("lkR0B"),d=i("dspZV"),c=i("6AePw"),p=i("3P3MX"),f=i("5gUNA"),g=i("7KshX");let x={rectangle:p.buildRectangle,polygon:c.buildPolygon,triangle:f.buildTriangle,circle:u.buildCircle,ellipse:u.buildCircle,roundedRectangle:u.buildCircle},m=new s.Rectangle;function _(t,e){let{geometryData:i,batches:r}=e;r.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let e=0;e<t.instructions.length;e++){let s=t.instructions[e];if("texture"===s.action)(function(t,e,i){let{vertices:r,uvs:s,indices:a}=i,o=a.length,u=r.length/2,d=[],c=x.rectangle,p=t.image;m.x=t.dx,m.y=t.dy,m.width=t.dw,m.height=t.dh;let f=t.transform;c.build(m,d),f&&(0,n.transformVertices)(d,f),c.triangulate(d,r,2,u,a,o);let g=p.uvs;s.push(g.x0,g.y0,g.x1,g.y1,g.x3,g.y3,g.x2,g.y2);let _=(0,l.BigPool).get(h.BatchableGraphics);_.indexOffset=o,_.indexSize=a.length-o,_.vertexOffset=u,_.vertexSize=r.length/2-u,_.color=t.style,_.alpha=t.alpha,_.texture=p,_.geometryData=i,e.push(_)})(s.data,r,i);else if("fill"===s.action||"stroke"===s.action){let t="stroke"===s.action,e=s.data.path.shapePath,a=s.data.style,n=s.data.hole;t&&n&&y(n.shapePath,a,null,!0,r,i),y(e,a,n,t,r,i)}}}function y(t,e,i,r,s,u){let{vertices:c,uvs:p,indices:f}=u,m=t.shapePrimitives.length-1;t.shapePrimitives.forEach(({shape:t,transform:_},y)=>{let b=f.length,S=c.length/2,v=[],T=x[t.type];if(T.build(t,v),_&&(0,n.transformVertices)(v,_),r){let i=t.closePath??!0;(0,d.buildLine)(v,e,!1,i,c,2,S,f,b)}else if(i&&m===y){0!==m&&console.warn("[Pixi Graphics] only the last shape have be cut out");let t=[],e=v.slice();(function(t){if(!t)return[];let e=t.shapePrimitives,i=[];for(let t=0;t<e.length;t++){let r=e[t].shape,s=[];x[r.type].build(r,s),i.push(s)}return i})(i.shapePath).forEach(i=>{t.push(e.length/2),e.push(...i)}),(0,g.triangulateWithHoles)(e,t,c,2,S,f,b)}else T.triangulate(v,c,2,S,f,b);let P=p.length/2,w=e.texture;if(w!==o.Texture.WHITE){let t=e.matrix;_&&t.append(_.clone().invert()),(0,a.buildUvs)(c,2,S,p,P,2,c.length/2-S,t)}else(0,a.buildSimpleUvs)(p,P,2,c.length/2-S);let M=(0,l.BigPool).get(h.BatchableGraphics);M.indexOffset=b,M.indexSize=f.length-b,M.vertexOffset=S,M.vertexSize=c.length/2-S,M.color=e.color,M.alpha=e.alpha,M.texture=w,M.geometryData=u,s.push(M)})}}),r("cvBir",function(e,i){function r(t,e,i,r,s,a,n,o=null){let l=0;i*=e,s*=a;let h=o.a,u=o.b,d=o.c,c=o.d,p=o.tx,f=o.ty;for(;l<n;){let n=t[i],o=t[i+1];r[s]=h*n+d*o+p,r[s+1]=u*n+c*o+f,s+=a,i+=e,l++}}function s(t,e,i,r){let s=0;for(e*=i;s<r;)t[e]=0,t[e+1]=0,e+=i,s++}t(e.exports,"buildUvs",()=>r),t(e.exports,"buildSimpleUvs",()=>s)}),r("5Mobi",function(e,i){t(e.exports,"transformVertices",()=>r);function r(t,e,i,r,s){let a=e.a,n=e.b,o=e.c,l=e.d,h=e.tx,u=e.ty;i=i||0,r=r||2,s=s||t.length/r-i;let d=i*r;for(let e=0;e<s;e++){let e=t[d],i=t[d+1];t[d]=a*e+o*i+h,t[d+1]=n*e+l*i+u,d+=r}}}),r("7bQyz",function(e,r){t(e.exports,"BatchableGraphics",()=>a);var s=i("bLQN7");class a{constructor(){this.batcher=null,this.batch=null,this.applyTransform=!0,this.roundPixels=0}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}packIndex(t,e,i){let r=this.geometryData.indices;for(let s=0;s<this.indexSize;s++)t[e++]=r[s+this.indexOffset]+i-this.vertexOffset}packAttributes(t,e,i,r){let a=this.geometryData,n=this.renderable,o=a.vertices,l=a.uvs,h=2*this.vertexOffset,u=(this.vertexOffset+this.vertexSize)*2,d=this.color,c=d>>16|65280&d|(255&d)<<16;if(this.applyTransform){let a=(0,s.mixColors)(c,n.groupColor)+(this.alpha*n.groupAlpha*255<<24),d=n.groupTransform,p=r<<16|65535&this.roundPixels,f=d.a,g=d.b,x=d.c,m=d.d,_=d.tx,y=d.ty;for(let r=h;r<u;r+=2){let s=o[r],n=o[r+1];t[i]=f*s+x*n+_,t[i+1]=g*s+m*n+y,t[i+2]=l[r],t[i+3]=l[r+1],e[i+4]=a,e[i+5]=p,i+=6}}else{let s=c+(255*this.alpha<<24);for(let a=h;a<u;a+=2)t[i]=o[a],t[i+1]=o[a+1],t[i+2]=l[a],t[i+3]=l[a+1],e[i+4]=s,e[i+5]=r<<16,i+=6}}get vertSize(){return this.vertexSize}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.vertexOffset=this.vertexOffset,t.vertexSize=this.vertexSize,t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData}reset(){this.applyTransform=!0}}}),r("lkR0B",function(e,i){t(e.exports,"buildCircle",()=>r);let r={build(t,e){let i,r,s,a,n,o;if("circle"===t.type)i=t.x,r=t.y,n=o=t.radius,s=a=0;else if("ellipse"===t.type)i=t.x,r=t.y,n=t.halfWidth,o=t.halfHeight,s=a=0;else{let e=t.width/2,l=t.height/2;i=t.x+e,r=t.y+l,n=o=Math.max(0,Math.min(t.radius,Math.min(e,l))),s=e-n,a=l-o}if(!(n>=0&&o>=0&&s>=0&&a>=0))return e;let l=Math.ceil(2.3*Math.sqrt(n+o)),h=8*l+(s?4:0)+(a?4:0);if(0===h)return e;if(0===l)return e[0]=e[6]=i+s,e[1]=e[3]=r+a,e[2]=e[4]=i-s,e[5]=e[7]=r-a,e;let u=0,d=4*l+(s?2:0)+2,c=d,p=h,f=s+n,g=a,x=i+f,m=i-f,_=r+g;if(e[u++]=x,e[u++]=_,e[--d]=_,e[--d]=m,a){let t=r-g;e[c++]=m,e[c++]=t,e[--p]=t,e[--p]=x}for(let t=1;t<l;t++){let h=Math.PI/2*(t/l),f=s+Math.cos(h)*n,g=a+Math.sin(h)*o,x=i+f,m=i-f,_=r+g,y=r-g;e[u++]=x,e[u++]=_,e[--d]=_,e[--d]=m,e[c++]=m,e[c++]=y,e[--p]=y,e[--p]=x}f=s,g=a+o,x=i+f,m=i-f,_=r+g;let y=r-g;return e[u++]=x,e[u++]=_,e[--p]=y,e[--p]=x,s&&(e[u++]=m,e[u++]=_,e[--p]=y,e[--p]=m),e},triangulate(t,e,i,r,s,a){if(0===t.length)return;let n=0,o=0;for(let e=0;e<t.length;e+=2)n+=t[e],o+=t[e+1];n/=t.length/2,o/=t.length/2;let l=r;e[l*i]=n,e[l*i+1]=o;let h=l++;for(let r=0;r<t.length;r+=2)e[l*i]=t[r],e[l*i+1]=t[r+1],r>0&&(s[a++]=l,s[a++]=h,s[a++]=l-1),l++;s[a++]=h+1,s[a++]=h,s[a++]=l-1}}}),r("dspZV",function(e,r){t(e.exports,"buildLine",()=>h);var s=i("2NXni"),a=i("3LOun"),n=i("4G5QW");function o(t,e,i,r,s,a,n,o){let l,h;n?(l=r,h=-i):(l=-r,h=i);let u=t-i*s+l,d=e-r*s+h,c=t+i*a+l,p=e+r*a+h;return o.push(u,d),o.push(c,p),2}function l(t,e,i,r,s,a,n,o){let l=i-t,h=r-e,u=Math.atan2(l,h),d=Math.atan2(s-t,a-e);o&&u<d?u+=2*Math.PI:!o&&u>d&&(d+=2*Math.PI);let c=u,p=d-u,f=Math.sqrt(l*l+h*h),g=(15*Math.abs(p)*Math.sqrt(f)/Math.PI>>0)+1,x=p/g;if(c+=x,o){n.push(t,e),n.push(i,r);for(let i=1,r=c;i<g;i++,r+=x)n.push(t,e),n.push(t+Math.sin(r)*f,e+Math.cos(r)*f);n.push(t,e),n.push(s,a)}else{n.push(i,r),n.push(t,e);for(let i=1,r=c;i<g;i++,r+=x)n.push(t+Math.sin(r)*f,e+Math.cos(r)*f),n.push(t,e);n.push(s,a),n.push(t,e)}return 2*g}function h(t,e,i,r,h,u,d,c,p){let f=a.closePointEps;if(0===t.length)return;let g=e.alignment;if(.5!==e.alignment){let e=(0,n.getOrientationOfPoints)(t);i&&(e*=-1),g=(g-.5)*e+.5}let x=new s.Point(t[0],t[1]),m=new s.Point(t[t.length-2],t[t.length-1]),_=Math.abs(x.x-m.x)<f&&Math.abs(x.y-m.y)<f;if(r){t=t.slice(),_&&(t.pop(),t.pop(),m.set(t[t.length-2],t[t.length-1]));let e=(x.x+m.x)*.5,i=(m.y+x.y)*.5;t.unshift(e,i),t.push(e,i)}let y=t.length/2,b=t.length,S=h.length/2,v=e.width/2,T=v*v,P=e.miterLimit*e.miterLimit,w=t[0],M=t[1],C=t[2],A=t[3],k=0,B=0,F=-(M-A),R=w-C,E=0,I=0,U=Math.sqrt(F*F+R*R);F/=U,R/=U,F*=v,R*=v;let z=g,G=(1-z)*2,H=2*z;r||("round"===e.cap?b+=l(w-F*(G-H)*.5,M-R*(G-H)*.5,w-F*G,M-R*G,w+F*H,M+R*H,h,!0)+2:"square"===e.cap&&(b+=o(w,M,F,R,G,H,!0,h))),h.push(w-F*G,M-R*G),h.push(w+F*H,M+R*H);for(let i=1;i<y-1;++i){w=t[(i-1)*2],M=t[(i-1)*2+1],C=t[2*i],A=t[2*i+1],k=t[(i+1)*2],B=t[(i+1)*2+1],U=Math.sqrt((F=-(M-A))*F+(R=w-C)*R),F/=U,R/=U,F*=v,R*=v,U=Math.sqrt((E=-(A-B))*E+(I=C-k)*I),E/=U,I/=U,E*=v,I*=v;let r=C-w,s=M-A,a=C-k,n=B-A,o=r*a+s*n,u=s*a-n*r,d=u<0;if(Math.abs(u)<.001*Math.abs(o)){h.push(C-F*G,A-R*G),h.push(C+F*H,A+R*H),o>=0&&("round"===e.join?b+=l(C,A,C-F*G,A-R*G,C-E*G,A-I*G,h,!1)+4:b+=2,h.push(C-E*H,A-I*H),h.push(C+E*G,A+I*G));continue}let c=(-F+w)*(-R+A)-(-F+C)*(-R+M),p=(-E+k)*(-I+A)-(-E+C)*(-I+B),f=(r*p-a*c)/u,g=(n*c-s*p)/u,x=(f-C)*(f-C)+(g-A)*(g-A),m=C+(f-C)*G,_=A+(g-A)*G,y=C-(f-C)*H,S=A-(g-A)*H,z=d?G:H;x<=Math.min(r*r+s*s,a*a+n*n)+z*z*T?"bevel"===e.join||x/T>P?(d?(h.push(m,_),h.push(C+F*H,A+R*H),h.push(m,_),h.push(C+E*H,A+I*H)):(h.push(C-F*G,A-R*G),h.push(y,S),h.push(C-E*G,A-I*G),h.push(y,S)),b+=2):"round"===e.join?d?(h.push(m,_),h.push(C+F*H,A+R*H),b+=l(C,A,C+F*H,A+R*H,C+E*H,A+I*H,h,!0)+4,h.push(m,_),h.push(C+E*H,A+I*H)):(h.push(C-F*G,A-R*G),h.push(y,S),b+=l(C,A,C-F*G,A-R*G,C-E*G,A-I*G,h,!1)+4,h.push(C-E*G,A-I*G),h.push(y,S)):(h.push(m,_),h.push(y,S)):(h.push(C-F*G,A-R*G),h.push(C+F*H,A+R*H),"round"===e.join?d?b+=l(C,A,C+F*H,A+R*H,C+E*H,A+I*H,h,!0)+2:b+=l(C,A,C-F*G,A-R*G,C-E*G,A-I*G,h,!1)+2:"miter"===e.join&&x/T<=P&&(d?(h.push(y,S),h.push(y,S)):(h.push(m,_),h.push(m,_)),b+=2),h.push(C-E*G,A-I*G),h.push(C+E*H,A+I*H),b+=2)}w=t[(y-2)*2],M=t[(y-2)*2+1],C=t[(y-1)*2],U=Math.sqrt((F=-(M-(A=t[(y-1)*2+1])))*F+(R=w-C)*R),F/=U,R/=U,F*=v,R*=v,h.push(C-F*G,A-R*G),h.push(C+F*H,A+R*H),r||("round"===e.cap?b+=l(C-F*(G-H)*.5,A-R*(G-H)*.5,C-F*G,A-R*G,C+F*H,A+R*H,h,!1)+2:"square"===e.cap&&(b+=o(C,A,F,R,G,H,!1,h)));let L=a.curveEps*a.curveEps;for(let t=S;t<b+S-2;++t)w=h[2*t],M=h[2*t+1],C=h[(t+1)*2],A=h[(t+1)*2+1],k=h[(t+2)*2],Math.abs(w*(A-(B=h[(t+2)*2+1]))+C*(B-M)+k*(M-A))<L||c.push(t,t+1,t+2)}}),r("3LOun",function(e,i){t(e.exports,"closePointEps",()=>r),t(e.exports,"curveEps",()=>s);let r=1e-4,s=1e-4}),r("4G5QW",function(e,i){t(e.exports,"getOrientationOfPoints",()=>r);function r(t){let e=t.length;if(e<6)return 1;let i=0;for(let r=0,s=t[e-2],a=t[e-1];r<e;r+=2){let e=t[r],n=t[r+1];i+=(e-s)*(n+a),s=e,a=n}return i<0?-1:1}}),r("6AePw",function(e,r){t(e.exports,"buildPolygon",()=>n);var s=i("7KshX");let a=[],n={build(t,e){for(let i=0;i<t.points.length;i++)e[i]=t.points[i];return e},triangulate(t,e,i,r,n,o){(0,s.triangulateWithHoles)(t,a,e,i,r,n,o)}}}),r("7KshX",function(r,s){t(r.exports,"triangulateWithHoles",()=>n);var a=i("eH7tg");function n(t,i,r,s,n,o,l){let h=e(a)(t,i,2);if(!h)return;for(let t=0;t<h.length;t+=3)o[l++]=h[t]+n,o[l++]=h[t+1]+n,o[l++]=h[t+2]+n;let u=n*s;for(let e=0;e<t.length;e+=2)r[u]=t[e],r[u+1]=t[e+1],u+=s}}),r("eH7tg",function(t,e){function i(t,e,i){i=i||2;var d,c,g,m,_,y,b,S=e&&e.length,v=S?e[0]*i:t.length,T=r(t,0,v,i,!0),P=[];if(!T||T.next===T.prev)return P;if(S&&(T=function(t,e,i,n){var h,u,d,c,g,x=[];for(h=0,u=e.length;h<u;h++)d=e[h]*n,c=h<u-1?e[h+1]*n:t.length,(g=r(t,d,c,n,!1))===g.next&&(g.steiner=!0),x.push(function(t){var e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t)return i}(g));for(x.sort(a),h=0;h<x.length;h++)i=function(t,e){var i=function(t,e){var i,r,s,a=e,n=t.x,h=t.y,u=-1/0;do{if(h<=a.y&&h>=a.next.y&&a.next.y!==a.y){var d=a.x+(h-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(d<=n&&d>u&&(u=d,s=a.x<a.next.x?a:a.next,d===n))return s}a=a.next}while(a!==e)if(!s)return null;var c,f=s,g=s.x,x=s.y,m=1/0;a=s;do n>=a.x&&a.x>=g&&n!==a.x&&o(h<x?n:u,h,g,x,h<x?u:n,h,a.x,a.y)&&(c=Math.abs(h-a.y)/(n-a.x),p(a,t)&&(c<m||c===m&&(a.x>s.x||a.x===s.x&&(i=s,r=a,0>l(i.prev,i,r.prev)&&0>l(r.next,i,i.next))))&&(s=a,m=c)),a=a.next;while(a!==f)return s}(t,e);if(!i)return e;var r=f(i,t);return s(r,r.next),s(i,i.next)}(x[h],i);return i}(t,e,T,i)),t.length>80*i){d=g=t[0],c=m=t[1];for(var w=i;w<v;w+=i)_=t[w],y=t[w+1],_<d&&(d=_),y<c&&(c=y),_>g&&(g=_),y>m&&(m=y);b=0!==(b=Math.max(g-d,m-c))?32767/b:0}return function t(e,i,r,a,d,c,g){if(e){!g&&c&&function(t,e,i,r){var s=t;do 0===s.z&&(s.z=n(s.x,s.y,e,i,r)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t)s.prevZ.nextZ=null,s.prevZ=null,function(t){var e,i,r,s,a,n,o,l,h=1;do{for(i=t,t=null,a=null,n=0;i;){for(n++,r=i,o=0,e=0;e<h&&(o++,r=r.nextZ);e++);for(l=h;o>0||l>0&&r;)0!==o&&(0===l||!r||i.z<=r.z)?(s=i,i=i.nextZ,o--):(s=r,r=r.nextZ,l--),a?a.nextZ=s:t=s,s.prevZ=a,a=s;i=r}a.nextZ=null,h*=2}while(n>1)}(s)}(e,a,d,c);for(var m,_,y=e;e.prev!==e.next;){if(m=e.prev,_=e.next,c?function(t,e,i,r){var s=t.prev,a=t.next;if(l(s,t,a)>=0)return!1;for(var h=s.x,u=t.x,d=a.x,c=s.y,p=t.y,f=a.y,g=h<u?h<d?h:d:u<d?u:d,x=c<p?c<f?c:f:p<f?p:f,m=h>u?h>d?h:d:u>d?u:d,_=c>p?c>f?c:f:p>f?p:f,y=n(g,x,e,i,r),b=n(m,_,e,i,r),S=t.prevZ,v=t.nextZ;S&&S.z>=y&&v&&v.z<=b;){if(S.x>=g&&S.x<=m&&S.y>=x&&S.y<=_&&S!==s&&S!==a&&o(h,c,u,p,d,f,S.x,S.y)&&l(S.prev,S,S.next)>=0||(S=S.prevZ,v.x>=g&&v.x<=m&&v.y>=x&&v.y<=_&&v!==s&&v!==a&&o(h,c,u,p,d,f,v.x,v.y)&&l(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;S&&S.z>=y;){if(S.x>=g&&S.x<=m&&S.y>=x&&S.y<=_&&S!==s&&S!==a&&o(h,c,u,p,d,f,S.x,S.y)&&l(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;v&&v.z<=b;){if(v.x>=g&&v.x<=m&&v.y>=x&&v.y<=_&&v!==s&&v!==a&&o(h,c,u,p,d,f,v.x,v.y)&&l(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}(e,a,d,c):function(t){var e=t.prev,i=t.next;if(l(e,t,i)>=0)return!1;for(var r=e.x,s=t.x,a=i.x,n=e.y,h=t.y,u=i.y,d=r<s?r<a?r:a:s<a?s:a,c=n<h?n<u?n:u:h<u?h:u,p=r>s?r>a?r:a:s>a?s:a,f=n>h?n>u?n:u:h>u?h:u,g=i.next;g!==e;){if(g.x>=d&&g.x<=p&&g.y>=c&&g.y<=f&&o(r,n,s,h,a,u,g.x,g.y)&&l(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}(e)){i.push(m.i/r|0),i.push(e.i/r|0),i.push(_.i/r|0),x(e),e=_.next,y=_.next;continue}if((e=_)===y){g?1===g?t(e=function(t,e,i){var r=t;do{var a=r.prev,n=r.next.next;!h(a,n)&&u(a,r,r.next,n)&&p(a,n)&&p(n,a)&&(e.push(a.i/i|0),e.push(r.i/i|0),e.push(n.i/i|0),x(r),x(r.next),r=t=n),r=r.next}while(r!==t)return s(r)}(s(e),i,r),i,r,a,d,c,2):2===g&&function(e,i,r,a,n,o){var d=e;do{for(var c,g,x=d.next.next;x!==d.prev;){if(d.i!==x.i&&(c=d,g=x,c.next.i!==g.i&&c.prev.i!==g.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&u(i,i.next,t,e))return!0;i=i.next}while(i!==t)return!1}(c,g)&&(p(c,g)&&p(g,c)&&function(t,e){var i=t,r=!1,s=(t.x+e.x)/2,a=(t.y+e.y)/2;do i.y>a!=i.next.y>a&&i.next.y!==i.y&&s<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==t)return r}(c,g)&&(l(c.prev,c,g.prev)||l(c,g.prev,g))||h(c,g)&&l(c.prev,c,c.next)>0&&l(g.prev,g,g.next)>0))){var m=f(d,x);d=s(d,d.next),m=s(m,m.next),t(d,i,r,a,n,o,0),t(m,i,r,a,n,o,0);return}x=x.next}d=d.next}while(d!==e)}(e,i,r,a,d,c):t(s(e),i,r,a,d,c,1);break}}}}(T,P,i,d,c,b,0),P}function r(t,e,i,r,s){var a,n;if(s===_(t,e,i,r)>0)for(a=e;a<i;a+=r)n=g(a,t[a],t[a+1],n);else for(a=i-r;a>=e;a-=r)n=g(a,t[a],t[a+1],n);return n&&h(n,n.next)&&(x(n),n=n.next),n}function s(t,e){if(!t)return t;e||(e=t);var i,r=t;do if(i=!1,!r.steiner&&(h(r,r.next)||0===l(r.prev,r,r.next))){if(x(r),(r=e=r.prev)===r.next)break;i=!0}else r=r.next;while(i||r!==e)return e}function a(t,e){return t.x-e.x}function n(t,e,i,r,s){return(t=((t=((t=((t=((t=(t-i)*s|0)|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)|(e=((e=((e=((e=((e=(e-r)*s|0)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)<<1}function o(t,e,i,r,s,a,n,o){return(s-n)*(e-o)>=(t-n)*(a-o)&&(t-n)*(r-o)>=(i-n)*(e-o)&&(i-n)*(a-o)>=(s-n)*(r-o)}function l(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function h(t,e){return t.x===e.x&&t.y===e.y}function u(t,e,i,r){var s=c(l(t,e,i)),a=c(l(t,e,r)),n=c(l(i,r,t)),o=c(l(i,r,e));return!!(s!==a&&n!==o||0===s&&d(t,i,e)||0===a&&d(t,r,e)||0===n&&d(i,t,r)||0===o&&d(i,e,r))}function d(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function c(t){return t>0?1:t<0?-1:0}function p(t,e){return 0>l(t.prev,t,t.next)?l(t,e,t.next)>=0&&l(t,t.prev,e)>=0:0>l(t,e,t.prev)||0>l(t,t.next,e)}function f(t,e){var i=new m(t.i,t.x,t.y),r=new m(e.i,e.x,e.y),s=t.next,a=e.prev;return t.next=e,e.prev=t,i.next=s,s.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function g(t,e,i,r){var s=new m(t,e,i);return r?(s.next=r.next,s.prev=r,r.next.prev=s,r.next=s):(s.prev=s,s.next=s),s}function x(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function m(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function _(t,e,i,r){for(var s=0,a=e,n=i-r;a<i;a+=r)s+=(t[n]-t[a])*(t[a+1]+t[n+1]),n=a;return s}t.exports=i,t.exports.default=i,i.deviation=function(t,e,i,r){var s=e&&e.length,a=s?e[0]*i:t.length,n=Math.abs(_(t,0,a,i));if(s)for(var o=0,l=e.length;o<l;o++){var h=e[o]*i,u=o<l-1?e[o+1]*i:t.length;n-=Math.abs(_(t,h,u,i))}var d=0;for(o=0;o<r.length;o+=3){var c=r[o]*i,p=r[o+1]*i,f=r[o+2]*i;d+=Math.abs((t[c]-t[f])*(t[p+1]-t[c+1])-(t[c]-t[p])*(t[f+1]-t[c+1]))}return 0===n&&0===d?0:Math.abs((d-n)/n)},i.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,s=0;s<t.length;s++){for(var a=0;a<t[s].length;a++)for(var n=0;n<e;n++)i.vertices.push(t[s][a][n]);s>0&&(r+=t[s-1].length,i.holes.push(r))}return i}}),r("3P3MX",function(e,i){t(e.exports,"buildRectangle",()=>r);let r={build(t,e){let i=t.x,r=t.y,s=t.width,a=t.height;return s>=0&&a>=0&&(e[0]=i,e[1]=r,e[2]=i+s,e[3]=r,e[4]=i+s,e[5]=r+a,e[6]=i,e[7]=r+a),e},triangulate(t,e,i,r,s,a){let n=0;e[(r*=i)+n]=t[0],e[r+n+1]=t[1],n+=i,e[r+n]=t[2],e[r+n+1]=t[3],n+=i,e[r+n]=t[6],e[r+n+1]=t[7],n+=i,e[r+n]=t[4],e[r+n+1]=t[5],n+=i;let o=r/i;s[a++]=o,s[a++]=o+1,s[a++]=o+2,s[a++]=o+1,s[a++]=o+3,s[a++]=o+2}}}),r("5gUNA",function(e,i){t(e.exports,"buildTriangle",()=>r);let r={build:(t,e)=>(e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,e),triangulate(t,e,i,r,s,a){let n=0;e[(r*=i)+n]=t[0],e[r+n+1]=t[1],n+=i,e[r+n]=t[2],e[r+n+1]=t[3],n+=i,e[r+n]=t[4],e[r+n+1]=t[5];let o=r/i;s[a++]=o,s[a++]=o+1,s[a++]=o+2}}}),r("g4d6y",function(e,r){t(e.exports,"GraphicsPipe",()=>h);var s=i("eVz1R"),a=i("4rJn2"),n=i("e98Fy"),o=i("1A6sa"),l=i("7bQyz");class h{constructor(t,e){this.state=(0,a.State).for2d(),this._graphicsBatchesHash=Object.create(null),this.renderer=t,this._adaptor=e,this._adaptor.init()}validateRenderable(t){let e=t.context,i=!!this._graphicsBatchesHash[t.uid],r=this.renderer.graphicsContext.updateGpuContext(e);return!!r.isBatchable||i!==r.isBatchable}addRenderable(t,e){let i=this.renderer.graphicsContext.updateGpuContext(t.context);t._didGraphicsUpdate&&(t._didGraphicsUpdate=!1,this._rebuild(t)),i.isBatchable?this._addToBatcher(t,e):(this.renderer.renderPipes.batch.break(e),e.add(t))}updateRenderable(t){let e=this._graphicsBatchesHash[t.uid];if(e)for(let t=0;t<e.length;t++){let i=e[t];i.batcher.updateElement(i)}}destroyRenderable(t){this._graphicsBatchesHash[t.uid]&&this._removeBatchForRenderable(t.uid)}execute(t){if(!t.isRenderable)return;let e=this.renderer,i=t.context;if(!e.graphicsContext.getGpuContext(i).batches.length)return;let r=i.customShader||this._adaptor.shader;this.state.blendMode=t.groupBlendMode;let s=r.resources.localUniforms.uniforms;s.uTransformMatrix=t.groupTransform,s.uRound=e._roundPixels|t._roundPixels,(0,o.color32BitToUniform)(t.groupColorAlpha,s.uColor,0),this._adaptor.execute(this,t)}_rebuild(t){let e=!!this._graphicsBatchesHash[t.uid],i=this.renderer.graphicsContext.updateGpuContext(t.context);e&&this._removeBatchForRenderable(t.uid),i.isBatchable&&this._initBatchesForRenderable(t),t.batched=i.isBatchable}_addToBatcher(t,e){let i=this.renderer.renderPipes.batch,r=this._getBatchesForRenderable(t);for(let t=0;t<r.length;t++){let s=r[t];i.addToBatch(s,e)}}_getBatchesForRenderable(t){return this._graphicsBatchesHash[t.uid]||this._initBatchesForRenderable(t)}_initBatchesForRenderable(t){let e=t.context,i=this.renderer.graphicsContext.getGpuContext(e),r=this.renderer._roundPixels|t._roundPixels,s=i.batches.map(e=>{let i=(0,n.BigPool).get(l.BatchableGraphics);return e.copyTo(i),i.renderable=t,i.roundPixels=r,i});return this._graphicsBatchesHash[t.uid]=s,t.on("destroyed",()=>{this.destroyRenderable(t)}),s}_removeBatchForRenderable(t){this._graphicsBatchesHash[t].forEach(t=>{(0,n.BigPool).return(t)}),this._graphicsBatchesHash[t]=null}destroy(){for(let t in this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null,this._graphicsBatchesHash)this._removeBatchForRenderable(t);this._graphicsBatchesHash=null}}h.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"graphics"}}),r("7FXt7",function(t,e){var r=i("eVz1R"),s=i("kpjyU");(0,r.extensions).add(s.MeshPipe)}),r("kpjyU",function(e,r){t(e.exports,"MeshPipe",()=>d);var s=i("eVz1R"),a=i("dNaJE"),n=i("86NKO"),o=i("lJEsO"),l=i("e98Fy"),h=i("1A6sa"),u=i("bq09x");class d{constructor(t,e){this.localUniforms=new o.UniformGroup({uTransformMatrix:{value:new a.Matrix,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new n.BindGroup({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this.renderer=t,this._adaptor=e,this._adaptor.init()}validateRenderable(t){let e=this._getMeshData(t),i=e.batched,r=t.batched;if(e.batched=r,i!==r)return!0;if(r){let i=t._geometry;if(i.indices.length!==e.indexSize||i.positions.length!==e.vertexSize)return e.indexSize=i.indices.length,e.vertexSize=i.positions.length,!0;let r=this._getBatchableMesh(t),s=t.texture;if(r.texture._source!==s._source&&r.texture._source!==s._source)return!r.batcher.checkAndUpdateTexture(r,s)}return!1}addRenderable(t,e){let i=this.renderer.renderPipes.batch,{batched:r}=this._getMeshData(t);if(r){let e=this._getBatchableMesh(t);e.texture=t._texture,e.geometry=t._geometry,i.addToBatch(e)}else i.break(e),e.add({renderPipeId:"mesh",mesh:t})}updateRenderable(t){if(t.batched){let e=this._gpuBatchableMeshHash[t.uid];e.texture=t._texture,e.geometry=t._geometry,e.batcher.updateElement(e)}}destroyRenderable(t){this._meshDataHash[t.uid]=null;let e=this._gpuBatchableMeshHash[t.uid];e&&((0,l.BigPool).return(e),this._gpuBatchableMeshHash[t.uid]=null)}execute({mesh:t}){if(!t.isRenderable)return;t.state.blendMode=t.groupBlendMode;let e=this.localUniforms;e.uniforms.uTransformMatrix=t.groupTransform,e.uniforms.uRound=this.renderer._roundPixels|t._roundPixels,e.update(),(0,h.color32BitToUniform)(t.groupColorAlpha,e.uniforms.uColor,0),this._adaptor.execute(this,t)}_getMeshData(t){return this._meshDataHash[t.uid]||this._initMeshData(t)}_initMeshData(t){return this._meshDataHash[t.uid]={batched:t.batched,indexSize:t._geometry.indices?.length,vertexSize:t._geometry.positions?.length},t.on("destroyed",()=>{this.destroyRenderable(t)}),this._meshDataHash[t.uid]}_getBatchableMesh(t){return this._gpuBatchableMeshHash[t.uid]||this._initBatchableMesh(t)}_initBatchableMesh(t){let e=(0,l.BigPool).get(u.BatchableMesh);return e.mesh=t,e.texture=t._texture,e.roundPixels=this.renderer._roundPixels|t._roundPixels,this._gpuBatchableMeshHash[t.uid]=e,e.mesh=t,e}destroy(){for(let t in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[t]&&(0,l.BigPool).return(this._gpuBatchableMeshHash[t]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}d.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"mesh"}}),r("bq09x",function(e,i){t(e.exports,"BatchableMesh",()=>r);class r{constructor(){this.batcher=null,this.batch=null,this.roundPixels=0,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}get blendMode(){return this.mesh.groupBlendMode}reset(){this.mesh=null,this.texture=null,this.batcher=null,this.batch=null}packIndex(t,e,i){let r=this.geometry.indices;for(let s=0;s<r.length;s++)t[e++]=r[s]+i}packAttributes(t,e,i,r){let s=this.mesh,a=this.geometry,n=s.groupTransform,o=r<<16|65535&this.roundPixels,l=n.a,h=n.b,u=n.c,d=n.d,c=n.tx,p=n.ty,f=a.positions,g=a.getBuffer("aUV"),x=g.data,m=x,_=this.texture.textureMatrix;_.isSimple||(m=this._transformedUvs,(this._textureMatrixUpdateId!==_._updateID||this._uvUpdateId!==g._updateID)&&((!m||m.length<x.length)&&(m=this._transformedUvs=new Float32Array(x.length)),this._textureMatrixUpdateId=_._updateID,this._uvUpdateId=g._updateID,_.multiplyUvs(x,m)));let y=s.groupColorAlpha;for(let r=0;r<f.length;r+=2){let s=f[r],a=f[r+1];t[i]=l*s+u*a+c,t[i+1]=h*s+d*a+p,t[i+2]=m[r],t[i+3]=m[r+1],e[i+4]=y,e[i+5]=o,i+=6}}get vertexSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}}),r("lT9Uv",function(t,e){var r=i("eVz1R"),s=i("7JqIa"),a=i("irQVi");(0,r.extensions).add(a.CanvasTextSystem),(0,r.extensions).add(s.CanvasTextPipe)}),r("7JqIa",function(e,r){t(e.exports,"CanvasTextPipe",()=>l);var s=i("eVz1R"),a=i("1ZKfN"),n=i("e98Fy"),o=i("8PFkM");class l{constructor(t){this._gpuText=Object.create(null),this._renderer=t}validateRenderable(t){let e=this._getGpuText(t),i=t._getKey();if(e.currentKey!==i){let i=t.resolution??this._renderer.resolution,{width:r,height:s}=this._renderer.canvasText.getTextureSize(t.text,i,t._style);return 1!==this._renderer.canvasText.getReferenceCount(e.currentKey)||r!==e.texture._source.width||s!==e.texture._source.height}return!1}addRenderable(t,e){let i=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(i)}updateRenderable(t){let e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),e.batcher.updateElement(e)}destroyRenderable(t){this._destroyRenderableById(t.uid)}_destroyRenderableById(t){let e=this._gpuText[t];this._renderer.canvasText.decreaseReferenceCount(e.currentKey),(0,n.BigPool).return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){let e=t._getKey(),i=this._getGpuText(t),r=i.batchableSprite;i.currentKey!==e&&this._updateGpuText(t),t._didTextUpdate=!1;let s=t._style.padding;(0,a.updateQuadBounds)(r.bounds,t._anchor,r.texture,s)}_updateGpuText(t){let e=this._getGpuText(t),i=e.batchableSprite;e.texture&&this._renderer.canvasText.decreaseReferenceCount(e.currentKey);let r=t.resolution??this._renderer.resolution;e.texture=i.texture=this._renderer.canvasText.getTexture(t.text,r,t._style,t._getKey()),e.currentKey=t._getKey(),i.texture=e.texture}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){let e={texture:null,currentKey:"--",batchableSprite:(0,n.BigPool).get(o.BatchableSprite)};return e.batchableSprite.renderable=t,e.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},e.batchableSprite.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuText[t.uid]=e,this._updateText(t),t.on("destroyed",()=>{this.destroyRenderable(t)}),e}destroy(){for(let t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}}l.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"text"}}),r("irQVi",function(e,r){t(e.exports,"CanvasTextSystem",()=>f);var s=i("AHTcQ"),a=i("eVz1R"),n=i("domwE"),o=i("8zNlV"),l=i("7U2uj"),h=i("h6sd0"),u=i("aq3uI"),d=i("ffIGX"),c=i("fMjVf"),p=i("eHP3T");class f{constructor(){this._activeTextures={}}getTextureSize(t,e,i){let r=(0,d.CanvasTextMetrics).measureText(t||" ",i),s=Math.ceil(Math.ceil(Math.max(1,r.width)+2*i.padding)*e),a=Math.ceil(Math.ceil(Math.max(1,r.height)+2*i.padding)*e);return s=Math.ceil(s-1e-6),a=Math.ceil(a-1e-6),{width:s=(0,n.nextPow2)(s),height:a=(0,n.nextPow2)(a)}}getTexture(t,e,i,r){if(this._activeTextures[r])return this._increaseReferenceCount(r),this._activeTextures[r].texture;let s=(0,d.CanvasTextMetrics).measureText(t||" ",i),a=Math.ceil(Math.ceil(Math.max(1,s.width)+2*i.padding)*e),n=Math.ceil(Math.ceil(Math.max(1,s.height)+2*i.padding)*e),l=(0,o.CanvasPool).getOptimalCanvasAndContext(a,n),{canvas:c}=l;this.renderTextToCanvas(t,i,e,l);let p=(0,u.getPo2TextureFromSource)(c,a,n,e);if(i.trim){let t=(0,h.getCanvasBoundingBox)(c,e);p.frame.copyFrom(t),p.updateUvs()}return this._activeTextures[r]={canvasAndContext:l,texture:p,usageCount:1},p}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){let e=this._activeTextures[t];if(e.usageCount--,0===e.usageCount){(0,o.CanvasPool).returnCanvasAndContext(e.canvasAndContext),(0,l.TexturePool).returnTexture(e.texture);let i=e.texture.source;i.resource=null,i.uploadMethodId="unknown",i.alphaMode="no-premultiply-alpha",this._activeTextures[t]=null}}getReferenceCount(t){return this._activeTextures[t].usageCount}renderTextToCanvas(t,e,i,r){let a,n;let{canvas:o,context:l}=r,h=(0,c.fontStringFromTextStyle)(e),u=(0,d.CanvasTextMetrics).measureText(t||" ",e),f=u.lines,g=u.lineHeight,x=u.lineWidths,m=u.maxLineWidth,_=u.fontProperties,y=o.height;if(l.resetTransform(),l.scale(i,i),l.clearRect(0,0,u.width+4,u.height+4),e._stroke?.width){let t=e._stroke;l.lineWidth=t.width,l.miterLimit=t.miterLimit,l.lineJoin=t.join,l.lineCap=t.cap}l.font=h;let b=e.dropShadow?2:1;for(let t=0;t<b;++t){let o=e.dropShadow&&0===t,h=o?Math.ceil(Math.max(1,y)+2*e.padding):0,u=h*i;if(o){l.fillStyle="black",l.strokeStyle="black";let t=e.dropShadow,r=t.color,a=t.alpha;l.shadowColor=(0,s.Color).shared.setValue(r).setAlpha(a).toRgbaString();let n=t.blur*i,o=t.distance*i;l.shadowBlur=n,l.shadowOffsetX=Math.cos(t.angle)*o,l.shadowOffsetY=Math.sin(t.angle)*o+u}else l.globalAlpha=e._fill?.alpha??1,l.fillStyle=e._fill?(0,p.getCanvasFillStyle)(e._fill,l):null,e._stroke?.width&&(l.strokeStyle=(0,p.getCanvasFillStyle)(e._stroke,l)),l.shadowColor="black";let d=(g-_.fontSize)/2;g-_.fontSize<0&&(d=0);let c=e._stroke?.width??0;for(let t=0;t<f.length;t++)a=c/2,n=c/2+t*g+_.ascent+d,"right"===e.align?a+=m-x[t]:"center"===e.align&&(a+=(m-x[t])/2),e._stroke&&this._drawLetterSpacing(f[t],e,r,a+e.padding,n+e.padding-h,!0),void 0!==e._fill&&this._drawLetterSpacing(f[t],e,r,a+e.padding,n+e.padding-h)}}_drawLetterSpacing(t,e,i,r,s,a=!1){let{context:n}=i,o=e.letterSpacing,l=!1;if(d.CanvasTextMetrics.experimentalLetterSpacingSupported&&(d.CanvasTextMetrics.experimentalLetterSpacing?(n.letterSpacing=`${o}px`,n.textLetterSpacing=`${o}px`,l=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px")),0===o||l){a?n.strokeText(t,r,s):n.fillText(t,r,s);return}let h=r,u=(0,d.CanvasTextMetrics).graphemeSegmenter(t),c=n.measureText(t).width,p=0;for(let t=0;t<u.length;++t){let e=u[t];a?n.strokeText(e,h,s):n.fillText(e,h,s);let i="";for(let e=t+1;e<u.length;++e)i+=u[e];h+=c-(p=n.measureText(i).width)+o,c=p}}destroy(){this._activeTextures=null}}f.extension={type:[a.ExtensionType.WebGLSystem,a.ExtensionType.WebGPUSystem,a.ExtensionType.CanvasSystem],name:"canvasText"}}),r("h6sd0",function(e,r){t(e.exports,"getCanvasBoundingBox",()=>o);var s=i("soqVu");function a(t,e,i){for(let r=0,s=4*i*e;r<e;++r,s+=4)if(0!==t[s+3])return!1;return!0}function n(t,e,i,r,s){let a=4*e;for(let e=r,n=r*a+4*i;e<=s;++e,n+=a)if(0!==t[n+3])return!1;return!0}function o(t,e=1){let{width:i,height:r}=t,o=t.getContext("2d",{willReadFrequently:!0});if(null===o)throw TypeError("Failed to get canvas 2D context");let l=o.getImageData(0,0,i,r).data,h=0,u=0,d=i-1,c=r-1;for(;u<r&&a(l,i,u);)++u;if(u===r)return s.Rectangle.EMPTY;for(;a(l,i,c);)--c;for(;n(l,i,h,u,c);)++h;for(;n(l,i,d,u,c);)--d;return++d,++c,new s.Rectangle(h/e,u/e,(d-h)/e,(c-u)/e)}}),r("aq3uI",function(e,r){t(e.exports,"getPo2TextureFromSource",()=>n);var s=i("7U2uj");let a=new(i("ggeMF")).Bounds;function n(t,e,i,r){a.minX=0,a.minY=0,a.maxX=t.width/r|0,a.maxY=t.height/r|0;let n=(0,s.TexturePool).getOptimalTexture(a.width,a.height,r,!1);return n.source.uploadMethodId="image",n.source.resource=t,n.source.alphaMode="premultiply-alpha-on-upload",n.frame.width=e/r,n.frame.height=i/r,n.source.emit("update",n.source),n.updateUvs(),n}}),r("ffIGX",function(e,r){t(e.exports,"CanvasTextMetrics",()=>l);var s=i("5m2Qn"),a=i("fMjVf");let n={willReadFrequently:!0},o=class t{static get experimentalLetterSpacingSupported(){let e=t._experimentalLetterSpacingSupported;if(void 0!==e){let i=(0,s.DOMAdapter).get().getCanvasRenderingContext2D().prototype;e=t._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(t,e,i,r,s,a,n,o,l){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=s,this.lineWidths=a,this.lineHeight=n,this.maxLineWidth=o,this.fontProperties=l}static measureText(e=" ",i,r=t._canvas,s=i.wordWrap){let n=`${e}:${i.styleKey}`;if(t._measurementCache[n])return t._measurementCache[n];let o=(0,a.fontStringFromTextStyle)(i),l=t.measureFont(o);0===l.fontSize&&(l.fontSize=i.fontSize,l.ascent=i.fontSize);let h=t.__context;h.font=o;let u=(s?t._wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),d=Array(u.length),c=0;for(let e=0;e<u.length;e++){let r=t._measureText(u[e],i.letterSpacing,h);d[e]=r,c=Math.max(c,r)}let p=i._stroke?.width||0,f=c+p;i.dropShadow&&(f+=i.dropShadow.distance);let g=i.lineHeight||l.fontSize+p,x=Math.max(g,l.fontSize+2*p)+(u.length-1)*(g+i.leading);return i.dropShadow&&(x+=i.dropShadow.distance),new t(e,i,f,x,u,d,g+i.leading,c,l)}static _measureText(e,i,r){let s=!1;t.experimentalLetterSpacingSupported&&(t.experimentalLetterSpacing?(r.letterSpacing=`${i}px`,r.textLetterSpacing=`${i}px`,s=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let a=r.measureText(e).width;return a>0&&(s?a-=i:a+=(t.graphemeSegmenter(e).length-1)*i),a}static _wordWrap(e,i,r=t._canvas){let s=r.getContext("2d",n),a=0,o="",l="",h=Object.create(null),{letterSpacing:u,whiteSpace:d}=i,c=t._collapseSpaces(d),p=t._collapseNewlines(d),f=!c,g=i.wordWrapWidth+u,x=t._tokenize(e);for(let e=0;e<x.length;e++){let r=x[e];if(t._isNewline(r)){if(!p){l+=t._addLine(o),f=!c,o="",a=0;continue}r=" "}if(c){let e=t.isBreakingSpace(r),i=t.isBreakingSpace(o[o.length-1]);if(e&&i)continue}let n=t._getFromCache(r,u,h,s);if(n>g){if(""!==o&&(l+=t._addLine(o),o="",a=0),t.canBreakWords(r,i.breakWords)){let e=t.wordWrapSplit(r);for(let n=0;n<e.length;n++){let d=e[n],c=d,p=1;for(;e[n+p];){let s=e[n+p];if(t.canBreakChars(c,s,r,n,i.breakWords))break;d+=s,c=s,p++}n+=p-1;let x=t._getFromCache(d,u,h,s);x+a>g&&(l+=t._addLine(o),f=!1,o="",a=0),o+=d,a+=x}}else{o.length>0&&(l+=t._addLine(o),o="",a=0);let i=e===x.length-1;l+=t._addLine(r,!i),f=!1,o="",a=0}}else n+a>g&&(f=!1,l+=t._addLine(o),o="",a=0),(o.length>0||!t.isBreakingSpace(r)||f)&&(o+=r,a+=n)}return l+t._addLine(o,!1)}static _addLine(e,i=!0){return e=t._trimRight(e),e=i?`${e}
`:e}static _getFromCache(e,i,r,s){let a=r[e];return"number"!=typeof a&&(a=t._measureText(e,i,s)+i,r[e]=a),a}static _collapseSpaces(t){return"normal"===t||"pre-line"===t}static _collapseNewlines(t){return"normal"===t}static _trimRight(e){if("string"!=typeof e)return"";for(let i=e.length-1;i>=0;i--){let r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static _isNewline(e){return"string"==typeof e&&t._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return"string"==typeof e&&t._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let i=[],r="";if("string"!=typeof e)return i;for(let s=0;s<e.length;s++){let a=e[s],n=e[s+1];if(t.isBreakingSpace(a,n)||t._isNewline(a)){""!==r&&(i.push(r),r=""),i.push(a);continue}r+=a}return""!==r&&i.push(r),i}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,r,s){return!0}static wordWrapSplit(e){return t.graphemeSegmenter(e)}static measureFont(e){if(t._fonts[e])return t._fonts[e];let i=t._context;i.font=e;let r=i.measureText(t.METRICS_STRING+t.BASELINE_SYMBOL),s={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return t._fonts[e]=s,s}static clearMetrics(e=""){e?delete t._fonts[e]:t._fonts={}}static get _canvas(){if(!t.__canvas){let e;try{let i=new OffscreenCanvas(0,0),r=i.getContext("2d",n);if(r?.measureText)return t.__canvas=i,i;e=(0,s.DOMAdapter).get().createCanvas()}catch(t){e=(0,s.DOMAdapter).get().createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas}static get _context(){return t.__context||(t.__context=t._canvas.getContext("2d",n)),t.__context}};o.METRICS_STRING="|q",o.BASELINE_SYMBOL="M",o.BASELINE_MULTIPLIER=1.4,o.HEIGHT_MULTIPLIER=2,o.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){let t=new Intl.Segmenter;return e=>[...t.segment(e)].map(t=>t.segment)}return t=>[...t]})(),o.experimentalLetterSpacing=!1,o._fonts={},o._newlines=[10,13],o._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],o._measurementCache={};let l=o}),r("fMjVf",function(e,i){t(e.exports,"fontStringFromTextStyle",()=>s);let r=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function s(t){let e="number"==typeof t.fontSize?`${t.fontSize}px`:t.fontSize,i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(let t=i.length-1;t>=0;t--){let e=i[t].trim();/([\"\'])[^\'\"]+\1/.test(e)||r.includes(e)||(e=`"${e}"`),i[t]=e}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${i.join(",")}`}}),r("eHP3T",function(e,r){t(e.exports,"getCanvasFillStyle",()=>u);var s=i("AHTcQ"),a=i("dNaJE"),n=i("5h88T"),o=i("8CF4q"),l=i("j8pAr"),h=i("hZTCO");function u(t,e){if(t.texture===n.Texture.WHITE&&!t.fill)return(0,s.Color).shared.setValue(t.color).toHex();if(t.fill){if(t.fill instanceof h.FillPattern){let i=t.fill,r=e.createPattern(i.texture.source.resource,"repeat"),s=i.transform.copyTo(a.Matrix.shared);return s.scale(i.texture.frame.width,i.texture.frame.height),r.setTransform(s),r}if(t.fill instanceof l.FillGradient){let i=t.fill;if("linear"===i.type){let t=e.createLinearGradient(i.x0,i.y0,i.x1,i.y1);return i.gradientStops.forEach(e=>{t.addColorStop(e.offset,(0,s.Color).shared.setValue(e.color).toHex())}),t}}}else{let i=e.createPattern(t.texture.source.resource,"repeat"),r=t.matrix.copyTo(a.Matrix.shared);return r.scale(t.texture.frame.width,t.texture.frame.height),i.setTransform(r),i}return(0,o.warn)("FillStyle not recognised",t),"red"}}),r("j8pAr",function(e,r){t(e.exports,"FillGradient",()=>d);var s=i("AHTcQ"),a=i("5m2Qn"),n=i("dNaJE"),o=i("4XrO5"),l=i("5h88T"),h=i("l80qL");let u=class t{constructor(t,e,i,r){this.uid=(0,h.uid)("fillGradient"),this.type="linear",this.gradientStops=[],this.x0=t,this.y0=e,this.x1=i,this.y1=r}addColorStop(t,e){return this.gradientStops.push({offset:t,color:(0,s.Color).shared.setValue(e).toHex()}),this}buildLinearGradient(){let e=t.defaultTextureSize,{gradientStops:i}=this,r=(0,a.DOMAdapter).get().createCanvas();r.width=e,r.height=e;let s=r.getContext("2d"),h=s.createLinearGradient(0,0,t.defaultTextureSize,1);for(let t=0;t<i.length;t++){let e=i[t];h.addColorStop(e.offset,e.color)}s.fillStyle=h,s.fillRect(0,0,e,e),this.texture=new l.Texture({source:new o.ImageSource({resource:r,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});let{x0:u,y0:d,x1:c,y1:p}=this,f=new n.Matrix,g=c-u,x=p-d;f.translate(-u,-d),f.scale(1/e,1/e),f.rotate(-Math.atan2(x,g)),f.scale(256/Math.sqrt(g*g+x*x),1),this.transform=f}};u.defaultTextureSize=256;let d=u}),r("hZTCO",function(e,r){t(e.exports,"FillPattern",()=>o);var s=i("dNaJE"),a=i("l80qL");let n={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class o{constructor(t,e){this.uid=(0,a.uid)("fillPattern"),this.transform=new s.Matrix,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=n[e].addressModeU,t.source.style.addressModeV=n[e].addressModeV)}setTransform(t){let e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height)}}}),r("8Sz72",function(t,e){var r=i("eVz1R"),s=i("1PcaQ"),a=i("3SZLI");(0,r.extensions).add(a.BitmapTextPipe,s.loadBitmapFont,s.bitmapFontCachePlugin)}),r("1PcaQ",function(e,r){t(e.exports,"bitmapFontCachePlugin",()=>p),t(e.exports,"loadBitmapFont",()=>f);var s=i("kuLtH"),a=i("kY7V1"),n=i("5m2Qn"),o=i("eVz1R"),l=i("kaDu9"),h=i("7zh1j"),u=i("3RsiR"),d=i("9m29S");let c=[".xml",".fnt"],p={extension:o.ExtensionType.CacheParser,test:t=>t instanceof h.BitmapFont,getCacheableAssets(t,e){let i={};return t.forEach(t=>{i[t]=e}),i[`${e.fontFamily}-bitmap`]=e,i}},f={extension:{type:o.ExtensionType.LoadParser,priority:s.LoaderParserPriority.Normal},test:t=>c.includes((0,l.path).extname(t).toLowerCase()),testParse:async t=>(0,u.bitmapFontTextParser).test(t)||(0,d.bitmapFontXMLStringParser).test(t),async parse(t,e,i){let r=(0,u.bitmapFontTextParser).test(t)?(0,u.bitmapFontTextParser).parse(t):(0,d.bitmapFontXMLStringParser).parse(t),{src:s}=e,{pages:n}=r,o=[];for(let t=0;t<n.length;++t){let e=n[t].file,i=(0,l.path).join((0,l.path).dirname(s),e);i=(0,a.copySearchParams)(i,s),o.push(i)}let c=await i.load(o),p=o.map(t=>c[t]);return new h.BitmapFont({data:r,textures:p},s)},async load(t,e){let i=await (0,n.DOMAdapter).get().fetch(t);return await i.text()},async unload(t,e,i){await Promise.all(t.pages.map(t=>i.unload(t.texture.source._sourceOrigin))),t.destroy()}}}),r("7zh1j",function(e,r){t(e.exports,"BitmapFont",()=>l);var s=i("soqVu"),a=i("5h88T"),n=i("gs09t"),o=i("1TcZG");class l extends n.AbstractBitmapFont{constructor(t,e){super();let{textures:i,data:r}=t;Object.keys(r.pages).forEach(t=>{let e=i[r.pages[parseInt(t,10)].id];this.pages.push({texture:e})}),Object.keys(r.chars).forEach(t=>{let e=r.chars[t],n=i[e.page].source,o=new s.Rectangle(e.x,e.y,e.width,e.height),l=new a.Texture({source:n,frame:o});this.chars[t]={id:t.codePointAt(0),xOffset:e.xOffset,yOffset:e.yOffset,xAdvance:e.xAdvance,kerning:e.kerning??{},texture:l}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){let{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){(0,o.BitmapFontManager).install(t)}static uninstall(t){(0,o.BitmapFontManager).uninstall(t)}}}),r("gs09t",function(r,s){t(r.exports,"AbstractBitmapFont",()=>o);var a=i("gpXaq"),n=i("eX50w");class o extends e(a){constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return(0,n.deprecation)(n.v8_0_0,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return(0,n.deprecation)(n.v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return(0,n.deprecation)(n.v8_0_0,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return(0,n.deprecation)(n.v8_0_0,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return(0,n.deprecation)(n.v8_0_0,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){for(let t in this.emit("destroy",this),this.removeAllListeners(),this.chars)this.chars[t].texture.destroy();this.chars=null,t&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}}}),r("1TcZG",function(e,r){t(e.exports,"BitmapFontManager",()=>u);var s=i("gYSnF"),a=i("eX50w"),n=i("itLJu"),o=i("54k6R"),l=i("eGMbi"),h=i("7gvRa");let u=new class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){let i=`${e.fontFamily}-bitmap`,r=!0;if(e._fill.fill&&(i+=e._fill.fill.uid,r=!1),!(0,s.Cache).has(i)){let t=new o.DynamicBitmapFont({style:e,overrideFill:r,overrideSize:!0,...this.defaultOptions});t.once("destroy",()=>(0,s.Cache).remove(i)),(0,s.Cache).set(i,t)}let a=(0,s.Cache).get(i);return a.ensureCharacters?.(t),a}getLayout(t,e){let i=this.getFont(t,e);return(0,l.getBitmapTextLayout)(t.split(""),e,i)}measureText(t,e){return this.getLayout(t,e)}install(...t){let e=t[0];"string"==typeof e&&(e={name:e,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},(0,a.deprecation)(a.v8_0_0,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));let i=e?.name;if(!i)throw Error("[BitmapFontManager] Property `name` is required.");let r=(e={...this.defaultOptions,...e}).style,l=r instanceof n.TextStyle?r:new n.TextStyle(r),u=null!==l._fill.fill&&void 0!==l._fill.fill,d=new o.DynamicBitmapFont({style:l,overrideFill:u,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),c=(0,h.resolveCharacters)(e.chars);return d.ensureCharacters(c.join("")),(0,s.Cache).set(`${i}-bitmap`,d),d.once("destroy",()=>(0,s.Cache).remove(`${i}-bitmap`)),d}uninstall(t){let e=`${t}-bitmap`,i=(0,s.Cache).get(e);i&&((0,s.Cache).remove(e),i.destroy())}}}),r("itLJu",function(r,s){t(r.exports,"TextStyle",()=>p);var a=i("gpXaq"),n=i("AHTcQ"),o=i("eX50w"),l=i("j8pAr"),h=i("hTvsP"),u=i("jwZTp"),d=i("gSm2a");let c=class t extends e(a){constructor(e={}){super(),function(t){if("boolean"==typeof t.dropShadow&&t.dropShadow){let e=p.defaultDropShadow;t.dropShadow={alpha:t.dropShadowAlpha??e.alpha,angle:t.dropShadowAngle??e.angle,blur:t.dropShadowBlur??e.blur,color:t.dropShadowColor??e.color,distance:t.dropShadowDistance??e.distance}}if(t.strokeThickness){(0,o.deprecation)(o.v8_0_0,"strokeThickness is now a part of stroke");let e=t.stroke;t.stroke={color:e,width:t.strokeThickness}}if(Array.isArray(t.fill)){(0,o.deprecation)(o.v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`");let e=new l.FillGradient(0,0,0,1.7*t.fontSize),i=t.fill.map(t=>(0,n.Color).shared.setValue(t).toNumber());i.forEach((r,s)=>{let a=t.fillGradientStops[s]??s/i.length;e.addColorStop(a,r)}),t.fill={fill:e}}}(e);let i={...t.defaultTextStyle,...e};for(let t in i)this[t]=i[t];this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){null!==e&&"object"==typeof e?this._dropShadow={...t.defaultDropShadow,...e}:this._dropShadow=e?{...t.defaultDropShadow}:null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){"string"==typeof t?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t,this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._fill=(0,u.convertFillInputToFillStyle)(0===t?"black":t,h.GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._stroke=(0,u.convertFillInputToFillStyle)(t,h.GraphicsContext.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=(0,d.generateTextStyleKey)(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let e=t.defaultTextStyle;for(let t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new t({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){if(this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){let e="boolean"==typeof t?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(e),this._originalFill?.texture&&this._originalFill.texture.destroy(e),this._stroke?.texture&&this._stroke.texture.destroy(e),this._originalStroke?.texture&&this._originalStroke.texture.destroy(e)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}};c.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},c.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let p=c}),r("hTvsP",function(r,s){t(r.exports,"GraphicsContext",()=>y);var a=i("gpXaq"),n=i("AHTcQ"),o=i("dNaJE"),l=i("2NXni"),h=i("5h88T"),u=i("l80qL"),d=i("eX50w"),c=i("ggeMF"),p=i("awDzm"),f=i("hFJzr"),g=i("jwZTp");let x=new l.Point,m=new o.Matrix,_=class t extends e(a){constructor(){super(...arguments),this.uid=(0,u.uid)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new p.GraphicsPath,this._transform=new o.Matrix,this._fillStyle={...t.defaultFillStyle},this._strokeStyle={...t.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new c.Bounds,this._boundsDirty=!0}clone(){let e=new t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultStrokeStyle),this}texture(t,e,i,r,s,a){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:r||0,dw:s||t.frame.width,dh:a||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?(0,n.Color).shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new p.GraphicsPath,this}fill(e,i){let r;let s=this.instructions[this.instructions.length-1];return(r=0===this._tick&&s&&"stroke"===s.action?s.data.path:this._activePath.clone())&&(null!=e&&(void 0!==i&&"number"==typeof e&&((0,d.deprecation)(d.v8_0_0,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}_initNextPathLocation(){let{x:t,y:e}=this._activePath.getLastPoint(l.Point.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(e){let i;let r=this.instructions[this.instructions.length-1];return(i=0===this._tick&&r&&"fill"===r.action?r.data.path:this._activePath.clone())&&(null!=e&&(this._strokeStyle=(0,g.convertFillInputToFillStyle)(e,t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0),this}cut(){for(let t=0;t<2;t++){let e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&("stroke"===e.action||"fill"===e.action)){if(e.data.hole)e.data.hole.addPath(i);else{e.data.hole=i;break}}}return this._initNextPathLocation(),this}arc(t,e,i,r,s,a){this._tick++;let n=this._transform;return this._activePath.arc(n.a*t+n.c*e+n.tx,n.b*t+n.d*e+n.ty,i,r,s,a),this}arcTo(t,e,i,r,s){this._tick++;let a=this._transform;return this._activePath.arcTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*r+a.tx,a.b*i+a.d*r+a.ty,s),this}arcToSvg(t,e,i,r,s,a,n){this._tick++;let o=this._transform;return this._activePath.arcToSvg(t,e,i,r,s,o.a*a+o.c*n+o.tx,o.b*a+o.d*n+o.ty),this}bezierCurveTo(t,e,i,r,s,a,n){this._tick++;let o=this._transform;return this._activePath.bezierCurveTo(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,o.a*i+o.c*r+o.tx,o.b*i+o.d*r+o.ty,o.a*s+o.c*a+o.tx,o.b*s+o.d*a+o.ty,n),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,i,r){return this._tick++,this._activePath.ellipse(t,e,i,r,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;let i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;let i=this._transform,r=this._activePath.instructions,s=i.a*t+i.c*e+i.tx,a=i.b*t+i.d*e+i.ty;return 1===r.length&&"moveTo"===r[0].action?(r[0].data[0]=s,r[0].data[1]=a):this._activePath.moveTo(s,a),this}quadraticCurveTo(t,e,i,r,s){this._tick++;let a=this._transform;return this._activePath.quadraticCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*r+a.tx,a.b*i+a.d*r+a.ty,s),this}rect(t,e,i,r){return this._tick++,this._activePath.rect(t,e,i,r,this._transform.clone()),this}roundRect(t,e,i,r,s){return this._tick++,this._activePath.roundRect(t,e,i,r,s,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,r,s=0,a){return this._tick++,this._activePath.regularPoly(t,e,i,r,s,a),this}roundPoly(t,e,i,r,s,a){return this._tick++,this._activePath.roundPoly(t,e,i,r,s,a),this}roundShape(t,e,i,r){return this._tick++,this._activePath.roundShape(t,e,i,r),this}filletRect(t,e,i,r,s){return this._tick++,this._activePath.filletRect(t,e,i,r,s),this}chamferRect(t,e,i,r,s,a){return this._tick++,this._activePath.chamferRect(t,e,i,r,s,a),this}star(t,e,i,r,s=0,a=0){return this._tick++,this._activePath.star(t,e,i,r,s,a,this._transform.clone()),this}svg(t){return this._tick++,(0,f.SVGParser)(t,this),this}restore(){let t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,r,s,a){return t instanceof o.Matrix?this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty):this._transform.set(t,e,i,r,s,a),this}transform(t,e,i,r,s,a){return t instanceof o.Matrix?this._transform.append(t):(m.set(t,e,i,r,s,a),this._transform.append(m)),this}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;let t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){let i=this.instructions[e],r=i.action;if("fill"===r){let e=i.data;t.addBounds(e.path.bounds)}else if("texture"===r){let e=i.data;t.addFrame(e.dx,e.dy,e.dx+e.dw,e.dy+e.dh,e.transform)}if("stroke"===r){let e=i.data,r=e.style.width/2,s=e.path.bounds;t.addFrame(s.minX-r,s.minY-r,s.maxX+r,s.maxY+r)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;let e=this.instructions,i=!1;for(let r=0;r<e.length;r++){let s=e[r],a=s.data,n=a.path;if(!s.action||!n)continue;let o=a.style,l=n.shapePath.shapePrimitives;for(let e=0;e<l.length;e++){let r=l[e].shape;if(!o||!r)continue;let n=l[e].transform,h=n?n.applyInverse(t,x):t;i="fill"===s.action?r.contains(h.x,h.y):r.strokeContains(h.x,h.y,o.width);let u=a.hole;if(u){let t=u.shapePath?.shapePrimitives;if(t)for(let e=0;e<t.length;e++)t[e].shape.contains(h.x,h.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){let e="boolean"==typeof t?t:t?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(e),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(e)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};_.defaultFillStyle={color:16777215,alpha:1,texture:h.Texture.WHITE,matrix:null,fill:null},_.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:h.Texture.WHITE,matrix:null,fill:null};let y=_}),r("awDzm",function(e,r){t(e.exports,"GraphicsPath",()=>h);var s=i("2NXni"),a=i("l80qL"),n=i("8CF4q"),o=i("98ho4"),l=i("7rqBZ");class h{constructor(t){this.instructions=[],this.uid=(0,a.uid)("graphicsPath"),this._dirty=!0,"string"==typeof t?(0,o.SVGToGraphicsPath)(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new l.ShapePath(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,r,a){let n=this.instructions[this.instructions.length-1],o=this.getLastPoint(s.Point.shared),l=0,h=0;if(n&&"bezierCurveTo"===n.action){l=n.data[2],h=n.data[3];let t=o.x,e=o.y;l=t+(t-l),h=e+(e-h)}else l=o.x,h=o.y;return this.instructions.push({action:"bezierCurveTo",data:[l,h,t,e,i,r,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){let r=this.instructions[this.instructions.length-1],a=this.getLastPoint(s.Point.shared),n=0,o=0;if(r&&"quadraticCurveTo"===r.action){n=r.data[0],o=r.data[1];let t=a.x,e=a.y;n=t+(t-n),o=e+(e-o)}else n=a.x,o=a.y;return this.instructions.push({action:"quadraticCurveTo",data:[n,o,t,e,i]}),this._dirty=!0,this}rect(t,e,i,r,s){return this.instructions.push({action:"rect",data:[t,e,i,r,s]}),this._dirty=!0,this}circle(t,e,i,r){return this.instructions.push({action:"circle",data:[t,e,i,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,r,s,a,n){s=s||r/2;let o=-1*Math.PI/2+a,l=2*i,h=2*Math.PI/l,u=[];for(let i=0;i<l;i++){let a=i%2?s:r,n=i*h+o;u.push(t+a*Math.cos(n),e+a*Math.sin(n))}return this.poly(u,!0,n),this}clone(t=!1){let e=new h;if(t)for(let t=0;t<this.instructions.length;t++){let i=this.instructions[t];e.instructions.push({action:i.action,data:i.data.slice()})}else e.instructions=this.instructions.slice();return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;let e=t.a,i=t.b,r=t.c,s=t.d,a=t.tx,o=t.ty,l=0,h=0,d=0,c=0,p=0,f=0,g=0,x=0;for(let m=0;m<this.instructions.length;m++){let _=this.instructions[m],y=_.data;switch(_.action){case"moveTo":case"lineTo":l=y[0],h=y[1],y[0]=e*l+r*h+a,y[1]=i*l+s*h+o;break;case"bezierCurveTo":d=y[0],c=y[1],p=y[2],f=y[3],l=y[4],h=y[5],y[0]=e*d+r*c+a,y[1]=i*d+s*c+o,y[2]=e*p+r*f+a,y[3]=i*p+s*f+o,y[4]=e*l+r*h+a,y[5]=i*l+s*h+o;break;case"quadraticCurveTo":d=y[0],c=y[1],l=y[2],h=y[3],y[0]=e*d+r*c+a,y[1]=i*d+s*c+o,y[2]=e*l+r*h+a,y[3]=i*l+s*h+o;break;case"arcToSvg":l=y[5],h=y[6],g=y[0],x=y[1],y[0]=e*g+r*x,y[1]=i*g+s*x,y[5]=e*l+r*h+a,y[6]=i*l+s*h+o;break;case"circle":y[4]=u(y[3],t);break;case"rect":y[4]=u(y[4],t);break;case"ellipse":y[8]=u(y[8],t);break;case"roundRect":y[5]=u(y[5],t);break;case"addPath":y[0].transform(t);break;case"poly":y[2]=u(y[2],t);break;default:(0,n.warn)("unknown transform action",_.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;"closePath"===i.action;){if(--e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t)}return t}}function u(t,e){return t?t.prepend(e):e.clone()}}),r("98ho4",function(r,s){t(r.exports,"SVGToGraphicsPath",()=>o);var a=i("eJJJX"),n=i("8CF4q");function o(t,i){let r=e(a)(t),s=[],o=null,l=0,h=0;for(let t=0;t<r.length;t++){let e=r[t],a=e[0];switch(a){case"M":l=e[1],h=e[2],i.moveTo(l,h);break;case"m":l+=e[1],h+=e[2],i.moveTo(l,h);break;case"H":l=e[1],i.lineTo(l,h);break;case"h":l+=e[1],i.lineTo(l,h);break;case"V":h=e[1],i.lineTo(l,h);break;case"v":h+=e[1],i.lineTo(l,h);break;case"L":l=e[1],h=e[2],i.lineTo(l,h);break;case"l":l+=e[1],h+=e[2],i.lineTo(l,h);break;case"C":l=e[5],h=e[6],i.bezierCurveTo(e[1],e[2],e[3],e[4],l,h);break;case"c":i.bezierCurveTo(l+e[1],h+e[2],l+e[3],h+e[4],l+e[5],h+e[6]),l+=e[5],h+=e[6];break;case"S":l=e[3],h=e[4],i.bezierCurveToShort(e[1],e[2],l,h);break;case"s":i.bezierCurveToShort(l+e[1],h+e[2],l+e[3],h+e[4]),l+=e[3],h+=e[4];break;case"Q":l=e[3],h=e[4],i.quadraticCurveTo(e[1],e[2],l,h);break;case"q":i.quadraticCurveTo(l+e[1],h+e[2],l+e[3],h+e[4]),l+=e[3],h+=e[4];break;case"T":l=e[1],h=e[2],i.quadraticCurveToShort(l,h);break;case"t":l+=e[1],h+=e[2],i.quadraticCurveToShort(l,h);break;case"A":l=e[6],h=e[7],i.arcToSvg(e[1],e[2],e[3],e[4],e[5],l,h);break;case"a":l+=e[6],h+=e[7],i.arcToSvg(e[1],e[2],e[3],e[4],e[5],l,h);break;case"Z":case"z":i.closePath(),s.length>0&&((o=s.pop())?(l=o.startX,h=o.startY):(l=0,h=0)),o=null;break;default:(0,n.warn)(`Unknown SVG path command: ${a}`)}"Z"!==a&&"z"!==a&&null===o&&(o={startX:l,startY:h},s.push(o))}return i}}),r("eJJJX",function(t,e){t.exports=function(t){var e=[];return t.replace(r,function(t,r,a){var n,o=r.toLowerCase();for(a=(n=a.match(s))?n.map(Number):[],"m"==o&&a.length>2&&(e.push([r].concat(a.splice(0,2))),o="l",r="m"==r?"l":"L");;){if(a.length==i[o])return a.unshift(r),e.push(a);if(a.length<i[o])throw Error("malformed path data");e.push([r].concat(a.splice(0,i[o])))}}),e};var i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/ig,s=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig}),r("7rqBZ",function(e,r){t(e.exports,"ShapePath",()=>m);var s=i("jaTjj"),a=i("asIJc"),n=i("67pKq"),o=i("soqVu"),l=i("guUt8"),h=i("ggeMF"),u=i("67FNK"),d=i("hYods"),c=i("dMnI7"),p=i("1DEaT"),f=i("j5RWP"),g=i("5fPVY");let x=new o.Rectangle;class m{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new h.Bounds,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();let i=this._currentPoly.points,r=i[i.length-2],s=i[i.length-1];return(r!==t||s!==e)&&i.push(t,e),this}arc(t,e,i,r,s,a){this._ensurePoly(!1);let n=this._currentPoly.points;return(0,c.buildArc)(n,t,e,i,r,s,a),this}arcTo(t,e,i,r,s){this._ensurePoly();let a=this._currentPoly.points;return(0,p.buildArcTo)(a,t,e,i,r,s),this}arcToSvg(t,e,i,r,s,a,n){let o=this._currentPoly.points;return(0,f.buildArcToSvg)(o,this._currentPoly.lastX,this._currentPoly.lastY,a,n,t,e,i,r,s),this}bezierCurveTo(t,e,i,r,s,a,n){this._ensurePoly();let o=this._currentPoly;return(0,u.buildAdaptiveBezier)(this._currentPoly.points,o.lastX,o.lastY,t,e,i,r,s,a,n),this}quadraticCurveTo(t,e,i,r,s){this._ensurePoly();let a=this._currentPoly;return(0,d.buildAdaptiveQuadratic)(this._currentPoly.points,a.lastX,a.lastY,t,e,i,r,s),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0)).transform(e);for(let e=0;e<t.instructions.length;e++){let i=t.instructions[e];this[i.action](...i.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,r,s){return this.drawShape(new o.Rectangle(t,e,i,r),s),this}circle(t,e,i,r){return this.drawShape(new s.Circle(t,e,i),r),this}poly(t,e,i){let r=new n.Polygon(t);return r.closePath=e,this.drawShape(r,i),this}regularPoly(t,e,i,r,s=0,a){let n=-1*Math.PI/2+s,o=2*Math.PI/(r=Math.max(0|r,3)),l=[];for(let s=0;s<r;s++){let r=s*o+n;l.push(t+i*Math.cos(r),e+i*Math.sin(r))}return this.poly(l,!0,a),this}roundPoly(t,e,i,r,s,a=0,n){if(r=Math.max(0|r,3),s<=0)return this.regularPoly(t,e,i,r,a);s=Math.min(s,i*Math.sin(Math.PI/r)-.001);let o=-1*Math.PI/2+a,l=2*Math.PI/r,h=(r-2)*Math.PI/r/2;for(let a=0;a<r;a++){let r=a*l+o,u=t+i*Math.cos(r),d=e+i*Math.sin(r),c=r+Math.PI+h,p=r-Math.PI-h,f=u+s*Math.cos(c),g=d+s*Math.sin(c),x=u+s*Math.cos(p),m=d+s*Math.sin(p);0===a?this.moveTo(f,g):this.lineTo(f,g),this.quadraticCurveTo(u,d,x,m,n)}return this.closePath()}roundShape(t,e,i=!1,r){return t.length<3?this:(i?(0,g.roundedShapeQuadraticCurve)(this,t,e,r):(0,g.roundedShapeArc)(this,t,e),this.closePath())}filletRect(t,e,i,r,s){if(0===s)return this.rect(t,e,i,r);let a=Math.min(i,r)/2,n=Math.min(a,Math.max(-a,s)),o=t+i,l=e+r,h=n<0?-n:0,u=Math.abs(n);return this.moveTo(t,e+u).arcTo(t+h,e+h,t+u,e,u).lineTo(o-u,e).arcTo(o-h,e+h,o,e+u,u).lineTo(o,l-u).arcTo(o-h,l-h,t+i-u,l,u).lineTo(t+u,l).arcTo(t+h,l-h,t,l-u,u).closePath()}chamferRect(t,e,i,r,s,a){if(s<=0)return this.rect(t,e,i,r);let n=Math.min(s,Math.min(i,r)/2),o=t+i,l=e+r,h=[t+n,e,o-n,e,o,e+n,o,l-n,o-n,l,t+n,l,t,l-n,t,e+n];for(let t=h.length-1;t>=2;t-=2)h[t]===h[t-2]&&h[t-1]===h[t-3]&&h.splice(t-1,2);return this.poly(h,!0,a)}ellipse(t,e,i,r,s){return this.drawShape(new a.Ellipse(t,e,i,r),s),this}roundRect(t,e,i,r,s,a){return this.drawShape(new l.RoundedRectangle(t,e,i,r,s),a),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),(i=new n.Polygon).points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){let e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new n.Polygon,t)){let t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let e=t.shape.x,i=t.shape.y;if(!t.transform.isIdentity()){let r=t.transform,s=e;e=r.a*e+r.c*i+r.tx,i=r.b*s+r.d*i+r.ty}this._currentPoly.points.push(e,i)}else this._currentPoly.points.push(0,0)}}buildPath(){let t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){let i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){let t=this._bounds;t.clear();let e=this.shapePrimitives;for(let i=0;i<e.length;i++){let r=e[i],s=r.shape.getBounds(x);r.transform?t.addRect(s,r.transform):t.addRect(s)}return t}}}),r("jaTjj",function(e,r){t(e.exports,"Circle",()=>a);var s=i("soqVu");class a{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new a(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;let i=this.radius*this.radius,r=this.x-t,s=this.y-e;return r*=r,s*=s,r+s<=i}strokeContains(t,e,i){if(0===this.radius)return!1;let r=this.x-t,s=this.y-e,a=this.radius,n=i/2,o=Math.sqrt(r*r+s*s);return o<a+n&&o>a-n}getBounds(t){return(t=t||new s.Rectangle).x=this.x-this.radius,t.y=this.y-this.radius,t.width=2*this.radius,t.height=2*this.radius,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}}),r("asIJc",function(e,r){t(e.exports,"Ellipse",()=>a);var s=i("soqVu");class a{constructor(t=0,e=0,i=0,r=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=r}clone(){return new a(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,r=(e-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(t,e,i){let{halfWidth:r,halfHeight:s}=this;if(r<=0||s<=0)return!1;let a=i/2,n=r-a,o=s-a,l=r+a,h=s+a,u=t-this.x,d=e-this.y;return u*u/(n*n)+d*d/(o*o)>1&&u*u/(l*l)+d*d/(h*h)<=1}getBounds(){return new s.Rectangle(this.x-this.halfWidth,this.y-this.halfHeight,2*this.halfWidth,2*this.halfHeight)}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}}),r("67pKq",function(e,r){t(e.exports,"Polygon",()=>n);var s=i("3qFiz"),a=i("soqVu");class n{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if("number"!=typeof e[0]){let t=[];for(let i=0,r=e.length;i<r;i++)t.push(e[i].x,e[i].y);e=t}this.points=e,this.closePath=!0}clone(){let t=new n(this.points.slice());return t.closePath=this.closePath,t}contains(t,e){let i=!1,r=this.points.length/2;for(let s=0,a=r-1;s<r;a=s++){let r=this.points[2*s],n=this.points[2*s+1],o=this.points[2*a],l=this.points[2*a+1];n>e!=l>e&&t<(e-n)/(l-n)*(o-r)+r&&(i=!i)}return i}strokeContains(t,e,i){let r=i/2,a=r*r,{points:n}=this;for(let i=0;i<n.length;i+=2){let r=n[i],o=n[i+1],l=n[(i+2)%n.length],h=n[(i+3)%n.length];if((0,s.squaredDistanceToLineSegment)(t,e,r,o,l,h)<=a)return!0}return!1}getBounds(t){t=t||new a.Rectangle;let e=this.points,i=1/0,r=-1/0,s=1/0,n=-1/0;for(let t=0,a=e.length;t<a;t+=2){let a=e[t],o=e[t+1];i=a<i?a:i,r=a>r?a:r,s=o<s?o:s,n=o>n?o:n}return t.x=i,t.width=r-i,t.y=s,t.height=n-s,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}}),r("3qFiz",function(e,i){t(e.exports,"squaredDistanceToLineSegment",()=>r);function r(t,e,i,r,s,a){let n,o;let l=s-i,h=a-r,u=l*l+h*h,d=-1;0!==u&&(d=((t-i)*l+(e-r)*h)/u),d<0?(n=i,o=r):d>1?(n=s,o=a):(n=i+d*l,o=r+d*h);let c=t-n,p=e-o;return c*c+p*p}}),r("guUt8",function(e,r){t(e.exports,"RoundedRectangle",()=>n);var s=i("soqVu");let a=(t,e,i,r,s,a)=>{let n=t-i,o=e-r,l=Math.sqrt(n*n+o*o);return l>=s-a&&l<=s+a};class n{constructor(t=0,e=0,i=0,r=0,s=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=r,this.radius=s}getBounds(t){return(t=t||new s.Rectangle).x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new n(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){let i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),s=e-(this.y+i),a=i*i;if(r*r+s*s<=a||(r=t-(this.x+this.width-i))*r+s*s<=a||r*r+(s=e-(this.y+this.height-i))*s<=a||(r=t-(this.x+i))*r+s*s<=a)return!0}return!1}strokeContains(t,e,i){let{x:r,y:s,width:n,height:o,radius:l}=this,h=i/2,u=r+l,d=s+l,c=n-2*l,p=o-2*l,f=r+n,g=s+o;return(t>=r-h&&t<=r+h||t>=f-h&&t<=f+h)&&e>=d&&e<=d+p||(e>=s-h&&e<=s+h||e>=g-h&&e<=g+h)&&t>=u&&t<=u+c||t<u&&e<d&&a(t,e,u,d,l,h)||t>f-l&&e<d&&a(t,e,f-l,d,l,h)||t>f-l&&e>g-l&&a(t,e,f-l,g-l,l,h)||t<u&&e>g-l&&a(t,e,u,g-l,l,h)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}}),r("67FNK",function(e,r){t(e.exports,"buildAdaptiveBezier",()=>a);var s=i("bBCDe");function a(t,e,i,r,a,n,o,l,h,u){let d=(1-Math.min(.99,Math.max(0,u??s.GraphicsContextSystem.defaultOptions.bezierSmoothness)))/1;return function t(e,i,r,s,a,n,o,l,h,u,d){if(d>8)return;let c=(e+r)/2,p=(i+s)/2,f=(r+a)/2,g=(s+n)/2,x=(a+o)/2,m=(n+l)/2,_=(c+f)/2,y=(p+g)/2,b=(f+x)/2,S=(g+m)/2,v=(_+b)/2,T=(y+S)/2;if(d>0){let t=o-e,d=l-i,c=Math.abs((r-o)*d-(s-l)*t),p=Math.abs((a-o)*d-(n-l)*t);if(c>11920929e-14&&p>11920929e-14){if((c+p)*(c+p)<=u*(t*t+d*d)){h.push(v,T);return}}else if(c>11920929e-14){if(c*c<=u*(t*t+d*d)){h.push(v,T);return}}else if(p>11920929e-14){if(p*p<=u*(t*t+d*d)){h.push(v,T);return}}else if((t=v-(e+o)/2)*t+(d=T-(i+l)/2)*d<=u){h.push(v,T);return}}t(e,i,c,p,_,y,v,T,h,u,d+1),t(v,T,b,S,x,m,o,l,h,u,d+1)}(e,i,r,a,n,o,l,h,t,d*=d,0),t.push(l,h),t}}),r("hYods",function(e,r){t(e.exports,"buildAdaptiveQuadratic",()=>a);var s=i("bBCDe");function a(t,e,i,r,a,n,o,l){let h=(1-Math.min(.99,Math.max(0,l??s.GraphicsContextSystem.defaultOptions.bezierSmoothness)))/1;return function t(e,i,r,s,a,n,o,l,h){if(h>8)return;let u=(i+s)/2,d=(r+a)/2,c=(s+n)/2,p=(a+o)/2,f=(u+c)/2,g=(d+p)/2,x=n-i,m=o-r,_=Math.abs((s-n)*m-(a-o)*x);if(_>11920929e-14){if(_*_<=l*(x*x+m*m)){e.push(f,g);return}}else if((x=f-(i+n)/2)*x+(m=g-(r+o)/2)*m<=l){e.push(f,g);return}t(e,i,r,u,d,f,g,l,h+1),t(e,f,g,c,p,n,o,l,h+1)}(t,e,i,r,a,n,o,h*=h,0),t.push(n,o),t}}),r("dMnI7",function(e,i){t(e.exports,"buildArc",()=>r);function r(t,e,i,r,s,a,n,o){let l=Math.abs(s-a);!n&&s>a?l=2*Math.PI-l:n&&a>s&&(l=2*Math.PI-l),o=Math.max(o=o||Math.max(6,Math.floor(6*Math.pow(r,1/3)*(l/Math.PI))),3);let h=l/o,u=s;h*=n?-1:1;for(let s=0;s<o+1;s++){let s=e+Math.cos(u)*r,a=i+Math.sin(u)*r;t.push(s,a),u+=h}}}),r("1DEaT",function(e,r){t(e.exports,"buildArcTo",()=>a);var s=i("dMnI7");function a(t,e,i,r,a,n){let o=t[t.length-2],l=t[t.length-1]-i,h=o-e,u=a-i,d=r-e,c=Math.abs(l*d-h*u);if(c<1e-8||0===n){(t[t.length-2]!==e||t[t.length-1]!==i)&&t.push(e,i);return}let p=l*l+h*h,f=u*u+d*d,g=l*u+h*d,x=n*Math.sqrt(p)/c,m=n*Math.sqrt(f)/c,_=x*g/p,y=m*g/f,b=x*d+m*h,S=x*u+m*l;(0,s.buildArc)(t,b+e,S+i,n,Math.atan2(l*(m+_)-S,h*(m+_)-b),Math.atan2(u*(x+y)-S,d*(x+y)-b),h*u>d*l)}}),r("j5RWP",function(e,r){t(e.exports,"buildArcToSvg",()=>u);var s=i("67FNK");let a=2*Math.PI,n={centerX:0,centerY:0,ang1:0,ang2:0},o=({x:t,y:e},i,r,s,a,n,o,l)=>{let h=s*(t*=i)-a*(e*=r),u=a*t+s*e;return l.x=h+n,l.y=u+o,l},l=(t,e,i,r)=>{let s=t*i+e*r;return s>1&&(s=1),s<-1&&(s=-1),(t*r-e*i<0?-1:1)*Math.acos(s)},h=(t,e,i,r,s,n,o,h,u,d,c,p,f)=>{let g=Math.pow(s,2),x=Math.pow(n,2),m=Math.pow(c,2),_=Math.pow(p,2),y=g*x-g*_-x*m;y<0&&(y=0),y/=g*_+x*m;let b=(y=Math.sqrt(y)*(o===h?-1:1))*s/n*p,S=-(y*n)/s*c,v=(c-b)/s,T=(p-S)/n,P=l(1,0,v,T),w=l(v,T,(-c-b)/s,(-p-S)/n);0===h&&w>0&&(w-=a),1===h&&w<0&&(w+=a),f.centerX=d*b-u*S+(t+i)/2,f.centerY=u*b+d*S+(e+r)/2,f.ang1=P,f.ang2=w};function u(t,e,i,r,l,u,d,c=0,p=0,f=0){if(0===u||0===d)return;let g=Math.sin(c*a/360),x=Math.cos(c*a/360),m=x*(e-r)/2+g*(i-l)/2,_=-g*(e-r)/2+x*(i-l)/2;if(0===m&&0===_)return;let y=Math.pow(m,2)/Math.pow(u=Math.abs(u),2)+Math.pow(_,2)/Math.pow(d=Math.abs(d),2);y>1&&(u*=Math.sqrt(y),d*=Math.sqrt(y)),h(e,i,r,l,u,d,p,f,g,x,m,_,n);let{ang1:b,ang2:S}=n,{centerX:v,centerY:T}=n,P=Math.abs(S)/(a/4);1e-7>Math.abs(1-P)&&(P=1);let w=Math.max(Math.ceil(P),1);S/=w;let M=t[t.length-2],C=t[t.length-1],A={x:0,y:0};for(let e=0;e<w;e++){let e=function(t,e){let i=1.5707963267948966===e?.551915024494:-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),r=Math.cos(t),s=Math.sin(t),a=Math.cos(t+e),n=Math.sin(t+e);return[{x:r-s*i,y:s+r*i},{x:a+n*i,y:n-a*i},{x:a,y:n}]}(b,S),{x:i,y:r}=o(e[0],u,d,x,g,v,T,A),{x:a,y:n}=o(e[1],u,d,x,g,v,T,A),{x:l,y:h}=o(e[2],u,d,x,g,v,T,A);(0,s.buildAdaptiveBezier)(t,M,C,i,r,a,n,l,h),M=l,C=h,b+=S}}}),r("5fPVY",function(e,i){function r(t,e,i){let r=(t,e)=>{let i=e.x-t.x,r=e.y-t.y,s=Math.sqrt(i*i+r*r);return{len:s,nx:i/s,ny:r/s}},s=(e,i)=>{0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)},a=e[e.length-1];for(let n=0;n<e.length;n++){let o;let l=e[n%e.length],h=l.radius??i;if(h<=0){s(n,l),a=l;continue}let u=e[(n+1)%e.length],d=r(l,a),c=r(l,u);if(d.len<1e-4||c.len<1e-4){s(n,l),a=l;continue}let p=Math.asin(d.nx*c.ny-d.ny*c.nx),f=1,g=!1;d.nx*c.nx- -(d.ny*c.ny)<0?p<0?p=Math.PI+p:(p=Math.PI-p,f=-1,g=!0):p>0&&(f=-1,g=!0);let x=p/2,m=Math.abs(Math.cos(x)*h/Math.sin(x));o=m>Math.min(d.len/2,c.len/2)?Math.abs((m=Math.min(d.len/2,c.len/2))*Math.sin(x)/Math.cos(x)):h;let _=l.x+c.nx*m+-c.ny*o*f,y=l.y+c.ny*m+c.nx*o*f,b=Math.atan2(d.ny,d.nx)+Math.PI/2*f,S=Math.atan2(c.ny,c.nx)-Math.PI/2*f;0===n&&t.moveTo(_+Math.cos(b)*o,y+Math.sin(b)*o),t.arc(_,y,o,b,S,g),a=l}}function s(t,e,i,r){let s=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),a=(t,e,i)=>({x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}),n=e.length;for(let o=0;o<n;o++){let l,h;let u=e[(o+1)%n],d=u.radius??i;if(d<=0){0===o?t.moveTo(u.x,u.y):t.lineTo(u.x,u.y);continue}let c=e[o],p=e[(o+2)%n],f=s(c,u);l=f<1e-4?u:a(u,c,Math.min(f/2,d)/f);let g=s(p,u);h=g<1e-4?u:a(u,p,Math.min(g/2,d)/g),0===o?t.moveTo(l.x,l.y):t.lineTo(l.x,l.y),t.quadraticCurveTo(u.x,u.y,h.x,h.y,r)}}t(e.exports,"roundedShapeArc",()=>r),t(e.exports,"roundedShapeQuadraticCurve",()=>s)}),r("hFJzr",function(e,r){t(e.exports,"SVGParser",()=>n);var s=i("AHTcQ"),a=i("awDzm");function n(t,e){if("string"==typeof t){let e=document.createElement("div");e.innerHTML=t.trim(),t=e.querySelector("svg")}return function t(e,i,r,n){let l,h,u,d,c,p,f,g,x,m,_,y,b,S,v,T;let P=e.children,{fillStyle:w,strokeStyle:M}=function(t){let e=t.getAttribute("style"),i={},r={},a=!1,n=!1;if(e){let t=e.split(";");for(let e=0;e<t.length;e++){let[o,l]=t[e].split(":");switch(o){case"stroke":"none"!==l&&(i.color=(0,s.Color).shared.setValue(l).toNumber(),n=!0);break;case"stroke-width":i.width=Number(l);break;case"fill":"none"!==l&&(a=!0,r.color=(0,s.Color).shared.setValue(l).toNumber());break;case"fill-opacity":r.alpha=Number(l);break;case"stroke-opacity":i.alpha=Number(l);break;case"opacity":r.alpha=Number(l),i.alpha=Number(l)}}}else{let e=t.getAttribute("stroke");e&&"none"!==e&&(n=!0,i.color=(0,s.Color).shared.setValue(e).toNumber(),i.width=o(t,"stroke-width",1));let l=t.getAttribute("fill");l&&"none"!==l&&(a=!0,r.color=(0,s.Color).shared.setValue(l).toNumber())}return{strokeStyle:n?i:null,fillStyle:a?r:null}}(e);switch(w&&r?r={...r,...w}:w&&(r=w),M&&n?n={...n,...M}:M&&(n=M),i.context.fillStyle=r,i.context.strokeStyle=n,e.nodeName.toLowerCase()){case"path":b=e.getAttribute("d"),S=new a.GraphicsPath(b),i.context.path(S),r&&i.context.fill(),n&&i.context.stroke();break;case"circle":f=o(e,"cx",0),g=o(e,"cy",0),x=o(e,"r",0),i.context.ellipse(f,g,x,x),r&&i.context.fill(),n&&i.context.stroke();break;case"rect":l=o(e,"x",0),h=o(e,"y",0),v=o(e,"width",0),T=o(e,"height",0),m=o(e,"rx",0),_=o(e,"ry",0),m||_?i.context.roundRect(l,h,v,T,m||_):i.context.rect(l,h,v,T),r&&i.context.fill(),n&&i.context.stroke();break;case"ellipse":f=o(e,"cx",0),g=o(e,"cy",0),m=o(e,"rx",0),_=o(e,"ry",0),i.context.beginPath(),i.context.ellipse(f,g,m,_),r&&i.context.fill(),n&&i.context.stroke();break;case"line":u=o(e,"x1",0),d=o(e,"y1",0),c=o(e,"x2",0),p=o(e,"y2",0),i.context.beginPath(),i.context.moveTo(u,d),i.context.lineTo(c,p),n&&i.context.stroke();break;case"polygon":y=e.getAttribute("points").match(/\d+/g).map(t=>parseInt(t,10)),i.context.poly(y,!0),r&&i.context.fill(),n&&i.context.stroke();break;case"polyline":y=e.getAttribute("points").match(/\d+/g).map(t=>parseInt(t,10)),i.context.poly(y,!1),n&&i.context.stroke();break;case"g":case"svg":break;default:console.info(`[SVG parser] <${e.nodeName}> elements unsupported`)}for(let e=0;e<P.length;e++)t(P[e],i,r,n)}(t,{context:e,path:new a.GraphicsPath},null,null),e}function o(t,e,i){let r=t.getAttribute(e);return r?Number(r):i}}),r("jwZTp",function(e,r){t(e.exports,"convertFillInputToFillStyle",()=>h);var s=i("AHTcQ"),a=i("dNaJE"),n=i("5h88T"),o=i("j8pAr"),l=i("hZTCO");function h(t,e){let i,r;if(null==t)return null;if(t?.fill?(r=t.fill,i={...e,...t}):(r=t,i=e),(0,s.Color).isColorLike(r)){let t=(0,s.Color).shared.setValue(r??0);return{...i,color:t.toNumber(),alpha:1===t.alpha?i.alpha:t.alpha,texture:n.Texture.WHITE}}if(r instanceof l.FillPattern){let t=r;return{...i,color:16777215,texture:t.texture,matrix:t.transform,fill:i.fill??null}}if(r instanceof o.FillGradient){let t=r;return t.buildLinearGradient(),{...i,color:16777215,texture:t.texture,matrix:t.transform}}let h={...e,...t};if(h.texture){if(h.texture!==n.Texture.WHITE){let t=h.matrix?.invert()||new a.Matrix;t.scale(1/h.texture.frame.width,1/h.texture.frame.height),h.matrix=t}let t=h.texture.source.style;"clamp-to-edge"===t.addressMode&&(t.addressMode="repeat")}let u=(0,s.Color).shared.setValue(h.color);return h.alpha*=u.alpha,h.color=u.toNumber(),h.matrix=h.matrix?h.matrix.clone():null,h}}),r("gSm2a",function(e,i){t(e.exports,"generateTextStyleKey",()=>s);let r=["_fontFamily","_fontStyle","_fontSize","_fontVariant","_fontWeight","_breakWords","_align","_leading","_letterSpacing","_lineHeight","_textBaseline","_whiteSpace","_wordWrap","_wordWrapWidth","_padding","_cssOverrides","_trim"];function s(t){var e,i;let s=[],n=0;for(let e=0;e<r.length;e++){let i=r[e];s[n++]=t[i]}return n=a(t._fill,s,n),e=t._stroke,i=n,e&&(i=a(e,s,i),s[i++]=e.width,s[i++]=e.alignment,s[i++]=e.cap,s[i++]=e.join,s[i++]=e.miterLimit),n=i,s.join("-")}function a(t,e,i){return t&&(e[i++]=t.color,e[i++]=t.alpha,e[i++]=t.fill?.uid),i}}),r("54k6R",function(e,r){t(e.exports,"DynamicBitmapFont",()=>g);var s=i("AHTcQ"),a=i("soqVu"),n=i("8zNlV"),o=i("4XrO5"),l=i("5h88T"),h=i("eX50w"),u=i("ffIGX"),d=i("fMjVf"),c=i("eHP3T"),p=i("gs09t"),f=i("7gvRa");class g extends p.AbstractBitmapFont{constructor(t){super(),this.resolution=1,this.pages=[],this._padding=4,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;let e=t.style.clone();t.overrideFill&&(e._fill.color=16777215,e._fill.alpha=1,e._fill.texture=l.Texture.WHITE,e._fill.fill=null);let i=e.fontSize;e.fontSize=this.baseMeasurementFontSize;let r=(0,d.fontStringFromTextStyle)(e);t.overrideSize?e._stroke&&(e._stroke.width*=this.baseRenderedFontSize/i):e.fontSize=this.baseRenderedFontSize=i,this._style=e,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,this.fontMetrics=(0,u.CanvasTextMetrics).measureFont(r),this.lineHeight=e.lineHeight||this.fontMetrics.fontSize||e.fontSize}ensureCharacters(t){let e;let i=(0,f.resolveCharacters)(t).filter(t=>!this._currentChars.includes(t)).filter((t,e,i)=>i.indexOf(t)===e);if(!i.length)return;this._currentChars=[...this._currentChars,...i];let{canvas:r,context:s}=(e=-1===this._currentPageIndex?this._nextPage():this.pages[this._currentPageIndex]).canvasAndContext,n=e.texture.source,o=this._style,h=this._currentX,d=this._currentY,c=this.baseRenderedFontSize/this.baseMeasurementFontSize,p=this._padding*c,g="italic"===o.fontStyle?2:1,x=0,m=!1;for(let t=0;t<i.length;t++){let e=i[t],f=(0,u.CanvasTextMetrics).measureText(e,o,r,!1);f.lineHeight=f.height;let _=g*f.width*c,y=f.height*c,b=_+2*p,S=y+2*p;if(m=!1,"\n"!==e&&"\r"!==e&&"	"!==e&&" "!==e&&(m=!0,x=Math.ceil(Math.max(S,x))),h+b>512&&(h=0,(d+=x)+(x=S)>512)){n.update();let t=this._nextPage();r=t.canvasAndContext.canvas,s=t.canvasAndContext.context,n=t.texture.source,d=0}let v=_/c-(o.dropShadow?.distance??0)-(o._stroke?.width??0);if(this.chars[e]={id:e.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:v,kerning:{}},m){this._drawGlyph(s,f,h+p,d+p,c,o);let t=n.width*c,i=n.height*c,r=new a.Rectangle(h/t*n.width,d/i*n.height,b/t*n.width,S/i*n.height);this.chars[e].texture=new l.Texture({source:n,frame:r}),h+=Math.ceil(b)}}n.update(),this._currentX=h,this._currentY=d,this._skipKerning&&this._applyKerning(i,s)}get pageTextures(){return(0,h.deprecation)(h.v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){let i=this._measureCache;for(let r=0;r<t.length;r++){let s=t[r];for(let t=0;t<this._currentChars.length;t++){let r=this._currentChars[t],a=i[s];a||(a=i[s]=e.measureText(s).width);let n=i[r];n||(n=i[r]=e.measureText(r).width);let o=e.measureText(s+r).width,l=o-(a+n);l&&(this.chars[s].kerning[r]=l),(l=(o=e.measureText(s+r).width)-(a+n))&&(this.chars[r].kerning[s]=l)}}}_nextPage(){this._currentPageIndex++;let t=this.resolution,e=(0,n.CanvasPool).getOptimalCanvasAndContext(512,512,t);this._setupContext(e.context,this._style,t);let i=this.baseRenderedFontSize/this.baseMeasurementFontSize*t,r=new l.Texture({source:new o.ImageSource({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload"})}),s={canvasAndContext:e,texture:r};return this.pages[this._currentPageIndex]=s,s}_setupContext(t,e,i){e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=(0,d.fontStringFromTextStyle)(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;let r=e._stroke,a=r?.width??0;if(r&&(t.lineWidth=a,t.lineJoin=r.join,t.miterLimit=r.miterLimit,t.strokeStyle=(0,c.getCanvasFillStyle)(r,t)),e._fill&&(t.fillStyle=(0,c.getCanvasFillStyle)(e._fill,t)),e.dropShadow){let r=e.dropShadow,a=(0,s.Color).shared.setValue(r.color).toArray(),n=r.blur*i,o=r.distance*i;t.shadowColor=`rgba(${255*a[0]},${255*a[1]},${255*a[2]},${r.alpha})`,t.shadowBlur=n,t.shadowOffsetX=Math.cos(r.angle)*o,t.shadowOffsetY=Math.sin(r.angle)*o}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,r,s,a){let n=e.text,o=e.fontProperties,l=a._stroke,h=(l?.width??0)*s,u=i+h/2,d=r-h/2,c=o.descent*s,p=e.lineHeight*s;a.stroke&&h&&t.strokeText(n,u,d+p-c),a._fill&&t.fillText(n,u,d+p-c)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){let{canvasAndContext:e,texture:i}=this.pages[t];(0,n.CanvasPool).returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}}}),r("7gvRa",function(e,i){t(e.exports,"resolveCharacters",()=>r);function r(t){if(""===t)return[];"string"==typeof t&&(t=[t]);let e=[];for(let i=0,r=t.length;i<r;i++){let r=t[i];if(Array.isArray(r)){if(2!==r.length)throw Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(0===r[0].length||0===r[1].length)throw Error("[BitmapFont]: Invalid character delimiter.");let t=r[0].charCodeAt(0),i=r[1].charCodeAt(0);if(i<t)throw Error("[BitmapFont]: Invalid character range.");for(let r=t;r<=i;r++)e.push(String.fromCharCode(r))}else e.push(...Array.from(r))}if(0===e.length)throw Error("[BitmapFont]: Empty set when resolving characters.");return e}}),r("eGMbi",function(e,i){t(e.exports,"getBitmapTextLayout",()=>r);function r(t,e,i){let r={width:0,height:0,offsetY:0,scale:e.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};r.offsetY=i.baseLineOffset;let s=r.lines[0],a=null,n=!0,o={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=t=>{let e=s.width;for(let i=0;i<o.index;i++){let r=t.positions[i];s.chars.push(t.chars[i]),s.charPositions.push(r+e)}s.width+=t.width,n=!1,o.width=0,o.index=0,o.chars.length=0},h=()=>{let t=s.chars.length-1,e=s.chars[t];for(;" "===e;)s.width-=i.chars[e].xAdvance,e=s.chars[--t];r.width=Math.max(r.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},n=!0,r.lines.push(s),r.height+=i.lineHeight},u=i.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*u,c=e.wordWrapWidth*u;for(let r=0;r<t.length+1;r++){let u;let p=r===t.length;p||(u=t[r]);let f=i.chars[u]||i.chars[" "];if(/(?:\s)/.test(u)||"\r"===u||"\n"===u||p){if(!n&&e.wordWrap&&s.width+o.width-d>c?h():o.start=s.width,l(o),p||s.charPositions.push(0),"\r"===u||"\n"===u)0!==s.width&&h();else if(!p){let t=f.xAdvance+(f.kerning[a]||0)+d;s.width+=t,s.spaceWidth=t,s.spacesIndex.push(s.charPositions.length),s.chars.push(u)}}else{let t=f.kerning[a]||0,e=f.xAdvance+t+d;o.positions[o.index++]=o.width+t,o.chars.push(u),o.width+=e}a=u}return h(),"center"===e.align?function(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],r=t.width/2-i.width/2;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=r}}(r):"right"===e.align?function(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],r=t.width-i.width;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=r}}(r):"justify"===e.align&&function(t){let e=t.width;for(let i=0;i<t.lines.length;i++){let r=t.lines[i],s=0,a=r.spacesIndex[s++],n=0,o=r.spacesIndex.length,l=(e-r.width)/o;for(let t=0;t<r.charPositions.length;t++)t===a&&(a=r.spacesIndex[s++],n+=l),r.charPositions[t]+=n}}(r),r}}),r("3RsiR",function(e,i){t(e.exports,"bitmapFontTextParser",()=>r);let r={test:t=>"string"==typeof t&&t.startsWith("info face="),parse(t){let e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let t in e){let r=e[t].match(/^[a-z]+/gm)[0],s=e[t].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(let t in s){let e=s[t].split("="),i=e[0],r=e[1].replace(/"/gm,""),n=parseFloat(r),o=isNaN(n)?r:n;a[i]=o}i[r].push(a)}let r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[s]=i.info,[a]=i.common,[n]=i.distanceField??[];n&&(r.distanceField={range:parseInt(n.distanceRange,10),type:n.fieldType}),r.fontSize=parseInt(s.size,10),r.fontFamily=s.face,r.lineHeight=parseInt(a.lineHeight,10);let o=i.page;for(let t=0;t<o.length;t++)r.pages.push({id:parseInt(o[t].id,10)||0,file:o[t].file});let l={};r.baseLineOffset=r.lineHeight-parseInt(a.base,10);let h=i.char;for(let t=0;t<h.length;t++){let e=h[t],i=parseInt(e.id,10),s=e.letter??e.char??String.fromCharCode(i);"space"===s&&(s=" "),l[i]=s,r.chars[s]={id:i,page:parseInt(e.page,10)||0,x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xOffset:parseInt(e.xoffset,10),yOffset:parseInt(e.yoffset,10),xAdvance:parseInt(e.xadvance,10),kerning:{}}}let u=i.kerning||[];for(let t=0;t<u.length;t++){let e=parseInt(u[t].first,10),i=parseInt(u[t].second,10),s=parseInt(u[t].amount,10);r.chars[l[i]].kerning[l[e]]=s}return r}}}),r("9m29S",function(e,r){t(e.exports,"bitmapFontXMLStringParser",()=>n);var s=i("5m2Qn"),a=i("93yhf");let n={test:t=>!!("string"==typeof t&&t.includes("<font>"))&&(0,a.bitmapFontXMLParser).test((0,s.DOMAdapter).get().parseXML(t)),parse:t=>(0,a.bitmapFontXMLParser).parse((0,s.DOMAdapter).get().parseXML(t))}}),r("93yhf",function(e,i){t(e.exports,"bitmapFontXMLParser",()=>r);let r={test:t=>"string"!=typeof t&&"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face"),parse(t){let e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=t.getElementsByTagName("info")[0],r=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("distanceField")[0];s&&(e.distanceField={type:s.getAttribute("fieldType"),range:parseInt(s.getAttribute("distanceRange"),10)});let a=t.getElementsByTagName("page"),n=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning");e.fontSize=parseInt(i.getAttribute("size"),10),e.fontFamily=i.getAttribute("face"),e.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let t=0;t<a.length;t++)e.pages.push({id:parseInt(a[t].getAttribute("id"),10)||0,file:a[t].getAttribute("file")});let l={};e.baseLineOffset=e.lineHeight-parseInt(r.getAttribute("base"),10);for(let t=0;t<n.length;t++){let i=n[t],r=parseInt(i.getAttribute("id"),10),s=i.getAttribute("letter")??i.getAttribute("char")??String.fromCharCode(r);"space"===s&&(s=" "),l[r]=s,e.chars[s]={id:r,page:parseInt(i.getAttribute("page"),10)||0,x:parseInt(i.getAttribute("x"),10),y:parseInt(i.getAttribute("y"),10),width:parseInt(i.getAttribute("width"),10),height:parseInt(i.getAttribute("height"),10),xOffset:parseInt(i.getAttribute("xoffset"),10),yOffset:parseInt(i.getAttribute("yoffset"),10),xAdvance:parseInt(i.getAttribute("xadvance"),10),kerning:{}}}for(let t=0;t<o.length;t++){let i=parseInt(o[t].getAttribute("first"),10),r=parseInt(o[t].getAttribute("second"),10),s=parseInt(o[t].getAttribute("amount"),10);e.chars[l[r]].kerning[l[i]]=s}return e}}}),r("3SZLI",function(e,r){t(e.exports,"BitmapTextPipe",()=>d);var s=i("gYSnF"),a=i("eVz1R"),n=i("e98Fy"),o=i("C9JRY"),l=i("gbb6L"),h=i("1TcZG"),u=i("eGMbi");class d{constructor(t){this._gpuBitmapText={},this._renderer=t}validateRenderable(t){let e=this._getGpuBitmapText(t);return t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,e)),this._renderer.renderPipes.graphics.validateRenderable(e)}addRenderable(t,e){let i=this._getGpuBitmapText(t);c(t,i),t._didTextUpdate&&(t._didTextUpdate=!1,this._updateContext(t,i)),this._renderer.renderPipes.graphics.addRenderable(i,e),i.context.customShader&&this._updateDistanceField(t)}destroyRenderable(t){this._destroyRenderableByUid(t.uid)}_destroyRenderableByUid(t){(0,n.BigPool).return(this._gpuBitmapText[t]),this._gpuBitmapText[t]=null}updateRenderable(t){let e=this._getGpuBitmapText(t);c(t,e),this._renderer.renderPipes.graphics.updateRenderable(e),e.context.customShader&&this._updateDistanceField(t)}_updateContext(t,e){let{context:i}=e,r=(0,h.BitmapFontManager).getFont(t.text,t._style);i.clear(),"none"===r.distanceField.type||i.customShader||(this._sdfShader||(this._sdfShader=new l.SdfShader),i.customShader=this._sdfShader);let s=Array.from(t.text),a=t._style,n=(a._stroke?.width||0)/2;n+=r.baseLineOffset;let o=(0,u.getBitmapTextLayout)(s,a,r),d=0,c=a.padding,p=o.scale;i.translate(-t._anchor._x*o.width-c,-t._anchor._y*(o.height+o.offsetY)-c).scale(p,p);let f=a._fill.color;for(let t=0;t<o.lines.length;t++){let e=o.lines[t];for(let t=0;t<e.charPositions.length;t++){let a=s[d++],o=r.chars[a];o?.texture&&i.texture(o.texture,f||"black",Math.round(e.charPositions[t]+o.xOffset),Math.round(n+o.yOffset))}n+=r.lineHeight}}_getGpuBitmapText(t){return this._gpuBitmapText[t.uid]||this.initGpuText(t)}initGpuText(t){let e=(0,n.BigPool).get(o.Graphics);return this._gpuBitmapText[t.uid]=e,this._updateContext(t,e),t.on("destroyed",()=>{this.destroyRenderable(t)}),this._gpuBitmapText[t.uid]}_updateDistanceField(t){let e=this._getGpuBitmapText(t).context,i=t._style.fontFamily,r=(0,s.Cache).get(`${i}-bitmap`),{a:a,b:n,c:o,d:l}=t.groupTransform,h=r.baseRenderedFontSize/t._style.fontSize,u=t.resolution??this._renderer.resolution,d=(Math.abs(Math.sqrt(a*a+n*n))+Math.abs(Math.sqrt(o*o+l*l)))/2*r.distanceField.range*(1/h)*u;e.customShader.resources.localUniforms.uniforms.uDistance=d}destroy(){for(let t in this._gpuBitmapText)this._destroyRenderableByUid(t);this._gpuBitmapText=null,this._sdfShader?.destroy(!0),this._sdfShader=null,this._renderer=null}}function c(t,e){e.groupTransform=t.groupTransform,e.groupColorAlpha=t.groupColorAlpha,e.groupColor=t.groupColor,e.groupBlendMode=t.groupBlendMode,e.globalDisplayStatus=t.globalDisplayStatus,e.groupTransform=t.groupTransform,e.localDisplayStatus=t.localDisplayStatus,e.groupAlpha=t.groupAlpha,e._roundPixels=t._roundPixels}d.extension={type:[a.ExtensionType.WebGLPipes,a.ExtensionType.WebGPUPipes,a.ExtensionType.CanvasPipes],name:"bitmapText"}}),r("C9JRY",function(e,r){t(e.exports,"Graphics",()=>o);var s=i("eX50w"),a=i("lR3Ev"),n=i("hTvsP");class o extends a.Container{constructor(t){t instanceof n.GraphicsContext&&(t={context:t});let{context:e,roundPixels:i,...r}=t||{};super({label:"Graphics",...r}),this.canBundle=!0,this.renderPipeId="graphics",this._roundPixels=0,e?this._context=e:this._context=this._ownedContext=new n.GraphicsContext,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=i??!1}set context(t){t!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=t,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}addBounds(t){t.addBounds(this._context.bounds)}containsPoint(t){return this._context.containsPoint(t)}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}onViewUpdate(){this._didChangeId+=4096,this._didGraphicsUpdate=!0,!this.didViewUpdate&&(this.didViewUpdate=!0,this.renderGroup&&this.renderGroup.onChildViewUpdate(this))}destroy(t){this._ownedContext&&!t?this._ownedContext.destroy(t):(!0===t||t?.context===!0)&&this._context.destroy(t),this._ownedContext=null,this._context=null,super.destroy(t)}_callContextMethod(t,e){return this.context[t](...e),this}setFillStyle(...t){return this._callContextMethod("setFillStyle",t)}setStrokeStyle(...t){return this._callContextMethod("setStrokeStyle",t)}fill(...t){return this._callContextMethod("fill",t)}stroke(...t){return this._callContextMethod("stroke",t)}texture(...t){return this._callContextMethod("texture",t)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...t){return this._callContextMethod("arc",t)}arcTo(...t){return this._callContextMethod("arcTo",t)}arcToSvg(...t){return this._callContextMethod("arcToSvg",t)}bezierCurveTo(...t){return this._callContextMethod("bezierCurveTo",t)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...t){return this._callContextMethod("ellipse",t)}circle(...t){return this._callContextMethod("circle",t)}path(...t){return this._callContextMethod("path",t)}lineTo(...t){return this._callContextMethod("lineTo",t)}moveTo(...t){return this._callContextMethod("moveTo",t)}quadraticCurveTo(...t){return this._callContextMethod("quadraticCurveTo",t)}rect(...t){return this._callContextMethod("rect",t)}roundRect(...t){return this._callContextMethod("roundRect",t)}poly(...t){return this._callContextMethod("poly",t)}regularPoly(...t){return this._callContextMethod("regularPoly",t)}roundPoly(...t){return this._callContextMethod("roundPoly",t)}roundShape(...t){return this._callContextMethod("roundShape",t)}filletRect(...t){return this._callContextMethod("filletRect",t)}chamferRect(...t){return this._callContextMethod("chamferRect",t)}star(...t){return this._callContextMethod("star",t)}svg(...t){return this._callContextMethod("svg",t)}restore(...t){return this._callContextMethod("restore",t)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...t){return this._callContextMethod("rotate",t)}scaleTransform(...t){return this._callContextMethod("scale",t)}setTransform(...t){return this._callContextMethod("setTransform",t)}transform(...t){return this._callContextMethod("transform",t)}translateTransform(...t){return this._callContextMethod("translate",t)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(t){this._context.fillStyle=t}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(t){this._context.strokeStyle=t}clone(t=!1){return t?new o(this._context.clone()):(this._ownedContext=null,new o(this._context))}lineStyle(t,e,i){(0,s.deprecation)(s.v8_0_0,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");let r={};return t&&(r.width=t),e&&(r.color=e),i&&(r.alpha=i),this.context.strokeStyle=r,this}beginFill(t,e){(0,s.deprecation)(s.v8_0_0,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");let i={};return t&&(i.color=t),e&&(i.alpha=e),this.context.fillStyle=i,this}endFill(){(0,s.deprecation)(s.v8_0_0,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();let t=this.context.strokeStyle;return(t.width!==n.GraphicsContext.defaultStrokeStyle.width||t.color!==n.GraphicsContext.defaultStrokeStyle.color||t.alpha!==n.GraphicsContext.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",t)}drawEllipse(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",t)}drawPolygon(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",t)}drawRect(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",t)}drawRoundedRect(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",t)}drawStar(...t){return(0,s.deprecation)(s.v8_0_0,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",t)}}}),r("gbb6L",function(e,r){t(e.exports,"SdfShader",()=>g);var s=i("dNaJE"),a=i("fIcRj"),n=i("1amHU"),o=i("6NJrS"),l=i("8WJj9"),h=i("eJTyi"),u=i("gxQKX"),d=i("7cNGO"),c=i("lJEsO"),p=i("iEsAD"),f=i("hAVGf");class g extends d.Shader{constructor(){super({glProgram:(0,n.compileHighShaderGlProgram)({name:"sdf-shader",bits:[o.colorBitGl,(0,l.generateTextureBatchBitGl)(a.MAX_TEXTURES),p.localUniformMSDFBitGl,f.mSDFBitGl,h.roundPixelsBitGl]}),gpuProgram:(0,n.compileHighShaderGpuProgram)({name:"sdf-shader",bits:[o.colorBit,(0,l.generateTextureBatchBit)(a.MAX_TEXTURES),p.localUniformMSDFBit,f.mSDFBit,h.roundPixelsBit]}),resources:{localUniforms:new c.UniformGroup({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new s.Matrix,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),batchSamplers:u.batchSamplersUniformGroup}})}}}),r("iEsAD",function(e,i){t(e.exports,"localUniformMSDFBit",()=>r),t(e.exports,"localUniformMSDFBitGl",()=>s);let r={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:` 
            outColor = vColor * calculateMSDFAlpha(outColor, localUniforms.uDistance);
        `}},s={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:` 
            outColor = vColor * calculateMSDFAlpha(outColor, uDistance);
        `}}}),r("hAVGf",function(e,i){t(e.exports,"mSDFBit",()=>r),t(e.exports,"mSDFBitGl",()=>s);let r={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, distance:f32) -> f32 {
                
                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));
            
                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                return alpha;
            }
        `}},s={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, float distance) {
                
                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));
               
                // SDF
                median = min(median, msdfColor.a);
            
                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
           
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                return alpha;
            }
        `}}}),r("85BOi",function(t,e){var r=i("eVz1R"),s=i("2fk0k"),a=i("5RICQ");(0,r.extensions).add(a.HTMLTextSystem),(0,r.extensions).add(s.HTMLTextPipe)}),r("2fk0k",function(e,r){t(e.exports,"HTMLTextPipe",()=>h);var s=i("eVz1R"),a=i("5h88T"),n=i("1ZKfN"),o=i("e98Fy"),l=i("8PFkM");class h{constructor(t){this._gpuText=Object.create(null),this._renderer=t}validateRenderable(t){let e=this._getGpuText(t),i=t._getKey();return e.textureNeedsUploading?(e.textureNeedsUploading=!1,!0):e.currentKey!==i}addRenderable(t){let e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),this._renderer.renderPipes.batch.addToBatch(e)}updateRenderable(t){let e=this._getGpuText(t).batchableSprite;t._didTextUpdate&&this._updateText(t),e.batcher.updateElement(e)}destroyRenderable(t){this._destroyRenderableById(t.uid)}_destroyRenderableById(t){let e=this._gpuText[t];this._renderer.htmlText.decreaseReferenceCount(e.currentKey),(0,o.BigPool).return(e.batchableSprite),this._gpuText[t]=null}_updateText(t){let e=t._getKey(),i=this._getGpuText(t),r=i.batchableSprite;i.currentKey!==e&&this._updateGpuText(t).catch(t=>{console.error(t)}),t._didTextUpdate=!1;let s=t._style.padding;(0,n.updateQuadBounds)(r.bounds,t._anchor,r.texture,s)}async _updateGpuText(t){t._didTextUpdate=!1;let e=this._getGpuText(t);if(e.generatingTexture)return;let i=t._getKey();this._renderer.htmlText.decreaseReferenceCount(e.currentKey),e.generatingTexture=!0,e.currentKey=i;let r=t.resolution??this._renderer.resolution,s=await this._renderer.htmlText.getManagedTexture(t.text,r,t._style,t._getKey()),a=e.batchableSprite;a.texture=e.texture=s,e.generatingTexture=!1,e.textureNeedsUploading=!0,t.onViewUpdate();let o=t._style.padding;(0,n.updateQuadBounds)(a.bounds,t._anchor,a.texture,o)}_getGpuText(t){return this._gpuText[t.uid]||this.initGpuText(t)}initGpuText(t){let e={texture:a.Texture.EMPTY,currentKey:"--",batchableSprite:(0,o.BigPool).get(l.BatchableSprite),textureNeedsUploading:!1,generatingTexture:!1},i=e.batchableSprite;return i.renderable=t,i.texture=a.Texture.EMPTY,i.bounds={minX:0,maxX:1,minY:0,maxY:0},i.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuText[t.uid]=e,t.on("destroyed",()=>{this.destroyRenderable(t)}),e}destroy(){for(let t in this._gpuText)this._destroyRenderableById(t);this._gpuText=null,this._renderer=null}}h.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"htmlText"}}),r("5RICQ",function(e,r){t(e.exports,"HTMLTextSystem",()=>y);var s=i("eVz1R"),a=i("7U2uj"),n=i("dgEnR"),o=i("lX2W5"),l=i("8CF4q"),h=i("e98Fy"),u=i("aq3uI"),d=i("fCTRI"),c=i("ioRFn"),p=i("ima1e"),f=i("eITko"),g=i("4jNdA"),x=i("dN8mg"),m=i("4JtMi"),_=i("8Aoo3");class y{constructor(t){this._activeTextures={},this._renderer=t,this._createCanvas=t.type===n.RendererType.WEBGPU}getTexture(t){return this._buildTexturePromise(t.text,t.resolution,t.style)}getManagedTexture(t,e,i,r){if(this._activeTextures[r])return this._increaseReferenceCount(r),this._activeTextures[r].promise;let s=this._buildTexturePromise(t,e,i).then(t=>(this._activeTextures[r].texture=t,t));return this._activeTextures[r]={texture:null,promise:s,usageCount:1},s}async _buildTexturePromise(t,e,i){let r=(0,h.BigPool).get(d.HTMLTextRenderData),s=(0,p.extractFontFamilies)(t,i),a=await (0,f.getFontCss)(s,i,c.HTMLTextStyle.defaultTextStyle),n=(0,_.measureHtmlText)(t,i,a,r),l=Math.ceil(Math.ceil(Math.max(1,n.width)+2*i.padding)*e),y=Math.ceil(Math.ceil(Math.max(1,n.height)+2*i.padding)*e),b=r.image;b.width=0|l,b.height=0|y;let S=(0,g.getSVGUrl)(t,i,e,a,r);await (0,m.loadSVGImage)(b,S,(0,o.isSafari)()&&s.length>0);let v=b;this._createCanvas&&(v=(0,x.getTemporaryCanvasFromImage)(b,e));let T=(0,u.getPo2TextureFromSource)(v,b.width,b.height,e);return this._createCanvas&&this._renderer.texture.initSource(T.source),(0,h.BigPool).return(r),T}_increaseReferenceCount(t){this._activeTextures[t].usageCount++}decreaseReferenceCount(t){let e=this._activeTextures[t];e&&(e.usageCount--,0===e.usageCount&&(e.texture?this._cleanUp(e):e.promise.then(t=>{e.texture=t,this._cleanUp(e)}).catch(()=>{(0,l.warn)("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[t]=null))}_cleanUp(t){(0,a.TexturePool).returnTexture(t.texture),t.texture.source.resource=null,t.texture.source.uploadMethodId="unknown"}getReferenceCount(t){return this._activeTextures[t].usageCount}destroy(){this._activeTextures=null}}y.extension={type:[s.ExtensionType.WebGLSystem,s.ExtensionType.WebGPUSystem,s.ExtensionType.CanvasSystem],name:"htmlText"},y.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"}}),r("lX2W5",function(e,r){t(e.exports,"isSafari",()=>a);var s=i("5m2Qn");function a(){let{userAgent:t}=(0,s.DOMAdapter).get().getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}}),r("fCTRI",function(e,i){t(e.exports,"HTMLTextRenderData",()=>a);let r="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml";class a{constructor(){this.svgRoot=document.createElementNS(r,"svg"),this.foreignObject=document.createElementNS(r,"foreignObject"),this.domElement=document.createElementNS(s,"div"),this.styleElement=document.createElementNS(s,"style"),this.image=new Image;let{foreignObject:t,svgRoot:e,styleElement:i,domElement:a}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(i),t.appendChild(a)}}}),r("ioRFn",function(e,r){t(e.exports,"HTMLTextStyle",()=>l);var s=i("8CF4q"),a=i("itLJu"),n=i("gSm2a"),o=i("au3DA");class l extends a.TextStyle{constructor(t={}){super(t),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=t.cssOverrides),this.tagStyles=t.tagStyles??{}}set cssOverrides(t){this._cssOverrides=t instanceof Array?t:[t],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=(0,n.generateTextStyleKey)(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new l({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=(0,o.textStyleToCSS)(this)),this._cssStyle}addOverride(...t){let e=t.filter(t=>!this.cssOverrides.includes(t));e.length>0&&(this.cssOverrides.push(...e),this.update())}removeOverride(...t){let e=t.filter(t=>this.cssOverrides.includes(t));e.length>0&&(this.cssOverrides=this.cssOverrides.filter(t=>!e.includes(t)),this.update())}set fill(t){"string"!=typeof t&&"number"!=typeof t&&(0,s.warn)("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=t}set stroke(t){t&&"string"!=typeof t&&"number"!=typeof t&&(0,s.warn)("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=t}}}),r("au3DA",function(e,r){t(e.exports,"textStyleToCSS",()=>a);var s=i("AHTcQ");function a(t){let e=t._stroke,i=t._fill,r=[`color: ${(0,s.Color).shared.setValue(i.color).toHex()}`,`font-size: ${t.fontSize}px`,`font-family: ${t.fontFamily}`,`font-weight: ${t.fontWeight}`,`font-style: ${t.fontStyle}`,`font-variant: ${t.fontVariant}`,`letter-spacing: ${t.letterSpacing}px`,`text-align: ${t.align}`,`padding: ${t.padding}px`,`white-space: ${"pre"===t.whiteSpace&&t.wordWrap?"pre-wrap":t.whiteSpace}`,...t.lineHeight?[`line-height: ${t.lineHeight}px`]:[],...t.wordWrap?[`word-wrap: ${t.breakWords?"break-all":"break-word"}`,`max-width: ${t.wordWrapWidth}px`]:[],...e?[o(e)]:[],...t.dropShadow?[n(t.dropShadow)]:[],...t.cssOverrides].join(";"),a=[`div { ${r} }`];return function(t,e){for(let i in t){let r=t[i],s=[];for(let t in r)h[t]?s.push(h[t](r[t])):l[t]&&s.push(l[t].replace("{{VALUE}}",r[t]));e.push(`${i} { ${s.join(";")} }`)}}(t.tagStyles,a),a.join(" ")}function n(t){let e=(0,s.Color).shared.setValue(t.color).setAlpha(t.alpha).toHexa(),i=Math.round(Math.cos(t.angle)*t.distance),r=Math.round(Math.sin(t.angle)*t.distance),a=`${i}px ${r}px`;return t.blur>0?`text-shadow: ${a} ${t.blur}px ${e}`:`text-shadow: ${a} ${e}`}function o(t){return`-webkit-text-stroke-width: ${t.width}px;-webkit-text-stroke-color: ${(0,s.Color).shared.setValue(t.color).toHex()};text-stroke-width: ${t.width}px;text-stroke-color: ${(0,s.Color).shared.setValue(t.color).toHex()};paint-order: stroke`}let l={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},h={fill:t=>`color: ${(0,s.Color).shared.setValue(t).toHex()}`,breakWords:t=>`word-wrap: ${t?"break-all":"break-word"}`,stroke:o,dropShadow:n}}),r("ima1e",function(e,i){t(e.exports,"extractFontFamilies",()=>r);function r(t,e){let i=e.fontFamily,r=[],s={},a=t.match(/font-family:([^;"\s]+)/g);function n(t){s[t]||(r.push(t),s[t]=!0)}if(Array.isArray(i))for(let t=0;t<i.length;t++)n(i[t]);else n(i);for(let t in a&&a.forEach(t=>{n(t.split(":")[1].trim())}),e.tagStyles)n(e.tagStyles[t].fontFamily);return r}}),r("eITko",function(e,r){t(e.exports,"getFontCss",()=>o);var s=i("gYSnF"),a=i("9uPNF");let n=new Map;async function o(t,e,i){let r=t.filter(t=>(0,s.Cache).has(`${t}-and-url`)).map((t,r)=>{if(!n.has(t)){let{url:o}=(0,s.Cache).get(`${t}-and-url`);0===r?n.set(t,(0,a.loadFontCSS)(e,o)):n.set(t,(0,a.loadFontCSS)({fontWeight:i.fontWeight,fontStyle:i.fontStyle,fontFamily:t},o))}return n.get(t)});return(await Promise.all(r)).join("\n")}}),r("9uPNF",function(e,r){t(e.exports,"loadFontCSS",()=>a);var s=i("67eDB");async function a(t,e){let i=await (0,s.loadFontAsBase64)(e);return`@font-face {
        font-family: "${t.fontFamily}";
        src: url('${i}');
        font-weight: ${t.fontWeight};
        font-style: ${t.fontStyle};
    }`}}),r("67eDB",function(e,r){t(e.exports,"loadFontAsBase64",()=>a);var s=i("5m2Qn");async function a(t){let e=await (0,s.DOMAdapter).get().fetch(t),i=await e.blob(),r=new FileReader;return await new Promise((t,e)=>{r.onloadend=()=>t(r.result),r.onerror=e,r.readAsDataURL(i)})}}),r("4jNdA",function(e,i){t(e.exports,"getSVGUrl",()=>r);function r(t,e,i,r,s){let{domElement:a,styleElement:n,svgRoot:o}=s;a.innerHTML=`<style>${e.cssStyle}</style><div>${t}</div>`,a.setAttribute("style",`transform: scale(${i});transform-origin: top left; display: inline-block`),n.textContent=r;let{width:l,height:h}=s.image;return o.setAttribute("width",l.toString()),o.setAttribute("height",h.toString()),new XMLSerializer().serializeToString(o)}}),r("dN8mg",function(e,r){t(e.exports,"getTemporaryCanvasFromImage",()=>a);var s=i("8zNlV");function a(t,e){let i=(0,s.CanvasPool).getOptimalCanvasAndContext(t.width,t.height,e),{context:r}=i;return r.clearRect(0,0,t.width,t.height),r.drawImage(t,0,0),(0,s.CanvasPool).returnCanvasAndContext(i),i.canvas}}),r("4JtMi",function(e,i){t(e.exports,"loadSVGImage",()=>r);function r(t,e,i){return new Promise(async r=>{i&&await new Promise(t=>setTimeout(t,100)),t.onload=()=>{r()},t.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,t.crossOrigin="anonymous"})}}),r("8Aoo3",function(e,r){let s;t(e.exports,"measureHtmlText",()=>o);var a=i("ffIGX"),n=i("fCTRI");function o(t,e,i,r){let{domElement:o,styleElement:l,svgRoot:h}=r=r||s||(s=new n.HTMLTextRenderData);o.innerHTML=`<style>${e.cssStyle}</style><div>${t}</div>`,o.setAttribute("style","transform-origin: top left; display: inline-block"),i&&(l.textContent=i),document.body.appendChild(h);let u=o.getBoundingClientRect();h.remove();let d=(0,a.CanvasTextMetrics).measureFont(e.fontStyle).descent;return{width:u.width,height:u.height+d}}}),r("3aSYR",function(t,e){var r=i("eVz1R"),s=i("lBnsB");(0,r.extensions).add(s.TilingSpritePipe)}),r("lBnsB",function(e,r){t(e.exports,"TilingSpritePipe",()=>g);var s=i("eVz1R"),a=i("4rJn2"),n=i("dgEnR"),o=i("1A6sa"),l=i("bq09x"),h=i("egBuP"),u=i("6uHq8"),d=i("kw4QU"),c=i("95QaC"),p=i("eFs8Y");let f=new d.QuadGeometry;class g{constructor(t){this._tilingSpriteDataHash=Object.create(null),this._renderer=t}validateRenderable(t){let e=this._getTilingSpriteData(t),i=e.canBatch;this._updateCanBatch(t);let r=e.canBatch;if(r&&r===i){let{batchableMesh:i}=e;if(i.texture._source!==t.texture._source)return!i.batcher.checkAndUpdateTexture(i,t.texture)}return i!==r}addRenderable(t,e){let i=this._renderer.renderPipes.batch;this._updateCanBatch(t);let r=this._getTilingSpriteData(t),{geometry:s,canBatch:a}=r;if(a){r.batchableMesh||(r.batchableMesh=new l.BatchableMesh);let e=r.batchableMesh;t._didTilingSpriteUpdate&&(t._didTilingSpriteUpdate=!1,this._updateBatchableMesh(t),e.geometry=s,e.mesh=t,e.texture=t._texture),e.roundPixels=this._renderer._roundPixels|t._roundPixels,i.addToBatch(e)}else i.break(e),r.shader||(r.shader=new u.TilingSpriteShader),this.updateRenderable(t),e.add(t)}execute(t){let{shader:e}=this._tilingSpriteDataHash[t.uid];e.groups[0]=this._renderer.globalUniforms.bindGroup;let i=e.resources.localUniforms.uniforms;i.uTransformMatrix=t.groupTransform,i.uRound=this._renderer._roundPixels|t._roundPixels,(0,o.color32BitToUniform)(t.groupColorAlpha,i.uColor,0),this._renderer.encoder.draw({geometry:f,shader:e,state:a.State.default2d})}updateRenderable(t){let e=this._getTilingSpriteData(t),{canBatch:i}=e;if(i){let{batchableMesh:i}=e;t._didTilingSpriteUpdate&&this._updateBatchableMesh(t),i.batcher.updateElement(i)}else if(t._didTilingSpriteUpdate){let{shader:i}=e;i.updateUniforms(t.width,t.height,t._tileTransform.matrix,t.anchor.x,t.anchor.y,t.texture)}t._didTilingSpriteUpdate=!1}destroyRenderable(t){let e=this._getTilingSpriteData(t);e.batchableMesh=null,e.shader?.destroy(),this._tilingSpriteDataHash[t.uid]=null}_getTilingSpriteData(t){return this._tilingSpriteDataHash[t.uid]||this._initTilingSpriteData(t)}_initTilingSpriteData(t){let e=new h.MeshGeometry({indices:f.indices,positions:f.positions.slice(),uvs:f.uvs.slice()});return this._tilingSpriteDataHash[t.uid]={canBatch:!0,renderable:t,geometry:e},t.on("destroyed",()=>{this.destroyRenderable(t)}),this._tilingSpriteDataHash[t.uid]}_updateBatchableMesh(t){let{geometry:e}=this._getTilingSpriteData(t),i=t.texture.source.style;"repeat"!==i.addressMode&&(i.addressMode="repeat",i.update()),(0,p.setUvs)(t,e.uvs),(0,c.setPositions)(t,e.positions)}destroy(){for(let t in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[t].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(t){let e=this._getTilingSpriteData(t),i=t.texture,r=!0;return this._renderer.type===n.RendererType.WEBGL&&(r=this._renderer.context.supports.nonPowOf2wrapping),e.canBatch=i.textureMatrix.isSimple&&(r||i.source.isPowerOfTwo),e.canBatch}}g.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"tilingSprite"}}),r("egBuP",function(e,r){t(e.exports,"MeshGeometry",()=>h);var s=i("2qhsM"),a=i("cnPar"),n=i("kFbJv"),o=i("eX50w");let l=class t extends n.Geometry{constructor(...e){let i=e[0]??{};i instanceof Float32Array&&((0,o.deprecation)(o.v8_0_0,"use new MeshGeometry({ positions, uvs, indices }) instead"),i={positions:i,uvs:e[1],indices:e[2]});let r=(i={...t.defaultOptions,...i}).positions||new Float32Array([0,0,1,0,1,1,0,1]),n=i.uvs||new Float32Array([0,0,1,0,1,1,0,1]),l=i.indices||new Uint32Array([0,1,2,0,2,3]),h=i.shrinkBuffersToFit;super({attributes:{aPosition:{buffer:new s.Buffer({data:r,label:"attribute-mesh-positions",shrinkToFit:h,usage:a.BufferUsage.VERTEX|a.BufferUsage.COPY_DST}),format:"float32x2",stride:8,offset:0},aUV:{buffer:new s.Buffer({data:n,label:"attribute-mesh-uvs",shrinkToFit:h,usage:a.BufferUsage.VERTEX|a.BufferUsage.COPY_DST}),format:"float32x2",stride:8,offset:0}},indexBuffer:new s.Buffer({data:l,label:"index-mesh-buffer",shrinkToFit:h,usage:a.BufferUsage.INDEX|a.BufferUsage.COPY_DST}),topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(t){this.attributes.aPosition.buffer.data=t}get uvs(){return this.attributes.aUV.buffer.data}set uvs(t){this.attributes.aUV.buffer.data=t}get indices(){return this.indexBuffer.data}set indices(t){this.indexBuffer.data=t}};l.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let h=l}),r("6uHq8",function(e,r){let s,a;t(e.exports,"TilingSpriteShader",()=>f);var n=i("dNaJE"),o=i("1amHU"),l=i("bwYhl"),h=i("eJTyi"),u=i("7cNGO"),d=i("lJEsO"),c=i("5h88T"),p=i("lSjtG");class f extends u.Shader{constructor(){s??(s=(0,o.compileHighShaderGpuProgram)({name:"tiling-sprite-shader",bits:[l.localUniformBit,p.tilingBit,h.roundPixelsBit]})),a??(a=(0,o.compileHighShaderGlProgram)({name:"tiling-sprite-shader",bits:[l.localUniformBitGl,p.tilingBitGl,h.roundPixelsBitGl]})),super({glProgram:a,gpuProgram:s,resources:{localUniforms:new d.UniformGroup({uTransformMatrix:{value:new n.Matrix,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:new d.UniformGroup({uMapCoord:{value:new n.Matrix,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new n.Matrix,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}}),uTexture:c.Texture.EMPTY.source,uSampler:c.Texture.EMPTY.source.style}})}updateUniforms(t,e,i,r,s,a){let n=this.resources.tilingUniforms,o=a.width,l=a.height,h=a.textureMatrix,u=n.uniforms.uTextureTransform;u.set(i.a*o/t,i.b*o/e,i.c*l/t,i.d*l/e,i.tx/t,i.ty/e),u.invert(),n.uniforms.uMapCoord=h.mapCoord,n.uniforms.uClampFrame=h.uClampFrame,n.uniforms.uClampOffset=h.uClampOffset,n.uniforms.uTextureTransform=u,n.uniforms.uSizeAnchor[0]=t,n.uniforms.uSizeAnchor[1]=e,n.uniforms.uSizeAnchor[2]=r,n.uniforms.uSizeAnchor[3]=s,a&&(this.resources.uTexture=a.source,this.resources.uSampler=a.source.style)}}}),r("lSjtG",function(e,i){t(e.exports,"tilingBit",()=>r),t(e.exports,"tilingBitGl",()=>s);let r={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            } 

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},s={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;
        
        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);
        
        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0
    
        `}}}),r("kw4QU",function(e,r){t(e.exports,"QuadGeometry",()=>a);var s=i("egBuP");class a extends s.MeshGeometry{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}}),r("95QaC",function(e,i){t(e.exports,"setPositions",()=>r);function r(t,e){let i=t.anchor.x,r=t.anchor.y;e[0]=-i*t.width,e[1]=-r*t.height,e[2]=(1-i)*t.width,e[3]=-r*t.height,e[4]=(1-i)*t.width,e[5]=(1-r)*t.height,e[6]=-i*t.width,e[7]=(1-r)*t.height}}),r("eFs8Y",function(e,r){t(e.exports,"setUvs",()=>n);var s=i("dNaJE"),a=i("69HXm");function n(t,e){let i=t.texture,r=i.frame.width,n=i.frame.height,o=0,l=0;t._applyAnchorToTexture&&(o=t.anchor.x,l=t.anchor.y),e[0]=e[6]=-o,e[2]=e[4]=1-o,e[1]=e[3]=-l,e[5]=e[7]=1-l;let h=s.Matrix.shared;h.copyFrom(t._tileTransform.matrix),h.tx/=t.width,h.ty/=t.height,h.invert(),h.scale(t.width/r,t.height/n),(0,a.applyMatrix)(e,2,0,h)}}),r("69HXm",function(e,i){t(e.exports,"applyMatrix",()=>r);function r(t,e,i,r){let s=0,a=t.length/(e||2),n=r.a,o=r.b,l=r.c,h=r.d,u=r.tx,d=r.ty;for(i*=e;s<a;){let r=t[i],a=t[i+1];t[i]=n*r+l*a+u,t[i+1]=o*r+h*a+d,i+=e,s++}}}),r("gOfig",function(t,e){var r=i("eVz1R"),s=i("7hs4B");(0,r.extensions).add(s.NineSliceSpritePipe)}),r("7hs4B",function(e,r){t(e.exports,"NineSliceSpritePipe",()=>l);var s=i("eVz1R"),a=i("e98Fy"),n=i("bq09x"),o=i("jxmLS");class l{constructor(t){this._gpuSpriteHash=Object.create(null),this._renderer=t}addRenderable(t,e){let i=this._getGpuSprite(t);t._didSpriteUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i)}updateRenderable(t){let e=this._gpuSpriteHash[t.uid];t._didSpriteUpdate&&this._updateBatchableSprite(t,e),e.batcher.updateElement(e)}validateRenderable(t){let e=t._texture,i=this._getGpuSprite(t);return i.texture._source!==e._source&&!i.batcher.checkAndUpdateTexture(i,e)}destroyRenderable(t){let e=this._gpuSpriteHash[t.uid];(0,a.BigPool).return(e),this._gpuSpriteHash[t.uid]=null}_updateBatchableSprite(t,e){t._didSpriteUpdate=!1,e.geometry.update(t),e.texture=t._texture}_getGpuSprite(t){return this._gpuSpriteHash[t.uid]||this._initGPUSprite(t)}_initGPUSprite(t){let e=new n.BatchableMesh;return e.geometry=new o.NineSliceGeometry,e.mesh=t,e.texture=t._texture,e.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuSpriteHash[t.uid]=e,t.on("destroyed",()=>{this.destroyRenderable(t)}),e}destroy(){for(let t in this._gpuSpriteHash)this._gpuSpriteHash[t].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}}l.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"nineSliceSprite"}}),r("jxmLS",function(e,r){t(e.exports,"NineSliceGeometry",()=>n);var s=i("ifiML");let a=class t extends s.PlaneGeometry{constructor(e={}){e={...t.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(t){this.width=t.width??this.width,this.height=t.height??this.height,this._originalWidth=t.originalWidth??this._originalWidth,this._originalHeight=t.originalHeight??this._originalHeight,this._leftWidth=t.leftWidth??this._leftWidth,this._rightWidth=t.rightWidth??this._rightWidth,this._topHeight=t.topHeight??this._topHeight,this._bottomHeight=t.bottomHeight??this._bottomHeight,this.updateUvs(),this.updatePositions()}updatePositions(){let t=this.positions,e=this._leftWidth+this._rightWidth,i=this.width>e?1:this.width/e,r=this._topHeight+this._bottomHeight,s=Math.min(i,this.height>r?1:this.height/r);t[9]=t[11]=t[13]=t[15]=this._topHeight*s,t[17]=t[19]=t[21]=t[23]=this.height-this._bottomHeight*s,t[25]=t[27]=t[29]=t[31]=this.height,t[2]=t[10]=t[18]=t[26]=this._leftWidth*s,t[4]=t[12]=t[20]=t[28]=this.width-this._rightWidth*s,t[6]=t[14]=t[22]=t[30]=this.width,this.getBuffer("aPosition").update()}updateUvs(){let t=this.uvs;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1;let e=1/this._originalWidth,i=1/this._originalHeight;t[2]=t[10]=t[18]=t[26]=e*this._leftWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[4]=t[12]=t[20]=t[28]=1-e*this._rightWidth,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}};a.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let n=a}),r("ifiML",function(e,r){t(e.exports,"PlaneGeometry",()=>o);var s=i("eX50w"),a=i("egBuP");let n=class t extends a.MeshGeometry{constructor(...t){super({});let e=t[0]??{};"number"==typeof e&&((0,s.deprecation)(s.v8_0_0,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),e={width:e,height:t[1],verticesX:t[2],verticesY:t[3]}),this.build(e)}build(e){e={...t.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;let i=this.verticesX*this.verticesY,r=[],s=[],a=[],n=this.verticesX-1,o=this.verticesY-1,l=this.width/n,h=this.height/o;for(let t=0;t<i;t++){let e=t%this.verticesX,i=t/this.verticesX|0;r.push(e*l,i*h),s.push(e/n,i/o)}let u=n*o;for(let t=0;t<u;t++){let e=t%n,i=t/n|0,r=i*this.verticesX+e,s=i*this.verticesX+e+1,o=(i+1)*this.verticesX+e,l=(i+1)*this.verticesX+e+1;a.push(r,s,o,s,l,o)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint32Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};n.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let o=n}),r("bMKF0",function(t,e){var r=i("eVz1R"),s=i("j8qo9"),a=i("aicvc");(0,r.extensions).add(a.FilterSystem),(0,r.extensions).add(s.FilterPipe)}),r("j8qo9",function(e,r){t(e.exports,"FilterPipe",()=>a);var s=i("eVz1R");class a{constructor(t){this._renderer=t}push(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:e,filterEffect:t})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(t){"pushFilter"===t.action?this._renderer.filter.push(t):"popFilter"===t.action&&this._renderer.filter.pop()}destroy(){this._renderer=null}}a.extension={type:[s.ExtensionType.WebGLPipes,s.ExtensionType.WebGPUPipes,s.ExtensionType.CanvasPipes],name:"filter"}}),r("aicvc",function(e,r){t(e.exports,"FilterSystem",()=>_);var s=i("eVz1R"),a=i("dNaJE"),n=i("2NXni"),o=i("86NKO"),l=i("kFbJv"),h=i("lJEsO"),u=i("5h88T"),d=i("7U2uj"),c=i("dgEnR"),p=i("ggeMF"),f=i("ljoAU"),g=i("7H3Wm"),x=i("8CF4q");let m=new l.Geometry({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),location:0,format:"float32x2",stride:8,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class _{constructor(t){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new h.UniformGroup({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new o.BindGroup({}),this.renderer=t}get activeBackTexture(){return this._activeFilterData?.backTexture}push(t){let e=this.renderer,i=t.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());let r=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,0===i.length){r.skip=!0;return}let s=r.bounds;t.renderables?(0,g.getGlobalRenderableBounds)(t.renderables,s):t.filterEffect.filterArea?(s.clear(),s.addRect(t.filterEffect.filterArea),s.applyMatrix(t.container.worldTransform)):(0,f.getFastGlobalBounds)(t.container,s);let a=e.renderTarget.rootRenderTarget.colorTexture.source,n=a._resolution,o=0,l=a.antialias,h=!1,u=!1;for(let t=0;t<i.length;t++){let r=i[t];if(n=Math.min(n,r.resolution),o+=r.padding,"inherit"!==r.antialias&&(l="on"===r.antialias),!(r.compatibleRenderers&e.type)){u=!1;break}if(r.blendRequired&&!(e.backBuffer?.useBackBuffer??!0)){(0,x.warn)("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),u=!1;break}u=r.enabled||u,h=h||r.blendRequired}if(!u){r.skip=!0;return}let c=e.renderTarget.rootViewPort;if(s.scale(n).fitBounds(0,c.width,0,c.height).scale(1/n).pad(o).ceil(),!s.isPositive){r.skip=!0;return}r.skip=!1,r.bounds=s,r.blendRequired=h,r.container=t.container,r.filterEffect=t.filterEffect,r.previousRenderSurface=e.renderTarget.renderSurface,r.inputTexture=(0,d.TexturePool).getOptimalTexture(s.width,s.height,n,l),e.renderTarget.bind(r.inputTexture,!0),e.globalUniforms.push({offset:s})}pop(){let t=this.renderer;this._filterStackIndex--;let e=this._filterStack[this._filterStackIndex];if(e.skip)return;this._activeFilterData=e;let i=e.inputTexture,r=e.bounds,s=u.Texture.EMPTY;if(t.renderTarget.finishRenderPass(),e.blendRequired){let i=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,a=t.renderTarget.getRenderTarget(e.previousRenderSurface);s=this.getBackTexture(a,r,i)}e.backTexture=s;let a=e.filterEffect.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(s.source,3),t.globalUniforms.pop(),1===a.length)a[0].apply(this,i,e.previousRenderSurface,!1),(0,d.TexturePool).returnTexture(i);else{let t=e.inputTexture,i=(0,d.TexturePool).getOptimalTexture(r.width,r.height,t.source._resolution,!1),s=0;for(s=0;s<a.length-1;++s){a[s].apply(this,t,i,!0);let e=t;t=i,i=e}a[s].apply(this,t,e.previousRenderSurface,!1),(0,d.TexturePool).returnTexture(t),(0,d.TexturePool).returnTexture(i)}e.blendRequired&&(0,d.TexturePool).returnTexture(s)}getBackTexture(t,e,i){let r=t.colorTexture.source._resolution,s=(0,d.TexturePool).getOptimalTexture(e.width,e.height,r,!1),a=e.minX,n=e.minY;i&&(a-=i.minX,n-=i.minY),a=Math.floor(a*r),n=Math.floor(n*r);let o=Math.ceil(e.width*r),l=Math.ceil(e.height*r);return this.renderer.renderTarget.copyToTexture(t,s,{x:a,y:n},{width:o,height:l},{x:0,y:0}),s}applyFilter(t,e,i,r){let s=this.renderer,a=this._filterStack[this._filterStackIndex],o=a.bounds,l=n.Point.shared,h=a.previousRenderSurface===i,d=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,p=this._filterStackIndex-1;for(;p>0&&this._filterStack[p].skip;)--p;p>0&&(d=this._filterStack[p].inputTexture.source._resolution);let f=this._filterGlobalUniforms,g=f.uniforms,x=g.uOutputFrame,_=g.uInputSize,y=g.uInputPixel,b=g.uInputClamp,S=g.uGlobalFrame,v=g.uOutputTexture;if(h){let t=this._filterStackIndex;for(;t>0;){t--;let e=this._filterStack[this._filterStackIndex-1];if(!e.skip){l.x=e.bounds.minX,l.y=e.bounds.minY;break}}x[0]=o.minX-l.x,x[1]=o.minY-l.y}else x[0]=0,x[1]=0;x[2]=e.frame.width,x[3]=e.frame.height,_[0]=e.source.width,_[1]=e.source.height,_[2]=1/_[0],_[3]=1/_[1],y[0]=e.source.pixelWidth,y[1]=e.source.pixelHeight,y[2]=1/y[0],y[3]=1/y[1],b[0]=.5*y[2],b[1]=.5*y[3],b[2]=e.frame.width*_[2]-.5*y[2],b[3]=e.frame.height*_[3]-.5*y[3];let T=this.renderer.renderTarget.rootRenderTarget.colorTexture;S[0]=l.x*d,S[1]=l.y*d,S[2]=T.source.width*d,S[3]=T.source.height*d;let P=this.renderer.renderTarget.getRenderTarget(i);if(s.renderTarget.bind(i,!!r),i instanceof u.Texture?(v[0]=i.frame.width,v[1]=i.frame.height):(v[0]=P.width,v[1]=P.height),v[2]=P.isRoot?-1:1,f.update(),s.renderPipes.uniformBatch){let t=s.renderPipes.uniformBatch.getUboResource(f);this._globalFilterBindGroup.setResource(t,0)}else this._globalFilterBindGroup.setResource(f,0);this._globalFilterBindGroup.setResource(e.source,1),this._globalFilterBindGroup.setResource(e.source.style,2),t.groups[0]=this._globalFilterBindGroup,s.encoder.draw({geometry:m,shader:t,state:t._state,topology:"triangle-list"}),s.type===c.RendererType.WEBGL&&s.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new p.Bounds,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(t,e){let i=this._activeFilterData,r=t.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),s=e.worldTransform.copyTo(a.Matrix.shared);return s.invert(),r.prepend(s),r.scale(1/e.texture.frame.width,1/e.texture.frame.height),r.translate(e.anchor.x,e.anchor.y),r}}_.extension={type:[s.ExtensionType.WebGLSystem,s.ExtensionType.WebGPUSystem],name:"filter"}}),r("ljoAU",function(e,r){t(e.exports,"getFastGlobalBounds",()=>o);var s=i("dNaJE"),a=i("96ND8");let n=new s.Matrix;function o(t,e){return e.clear(),function t(e,i){if(7!==e.localDisplayStatus||!e.measurable)return;let r=!!e.effects.length,s=i;if((e.isRenderGroupRoot||r)&&(s=(0,a.boundsPool).get().clear()),e.boundsArea)i.addRect(e.boundsArea,e.worldTransform);else{if(e.renderPipeId){let t=e.bounds;s.addFrame(t.minX,t.minY,t.maxX,t.maxY,e.groupTransform)}let i=e.children;for(let e=0;e<i.length;e++)t(i[e],s)}if(r){let t=!1;for(let i=0;i<e.effects.length;i++)e.effects[i].addBounds&&(t||(t=!0,s.applyMatrix(e.renderGroup.worldTransform)),e.effects[i].addBounds(s,!0));t&&(s.applyMatrix(e.renderGroup.worldTransform.copyTo(n).invert()),i.addBounds(s,e.relativeGroupTransform)),i.addBounds(s),(0,a.boundsPool).return(s)}else e.isRenderGroupRoot&&(i.addBounds(s,e.relativeGroupTransform),(0,a.boundsPool).return(s))}(t,e),e.isValid||e.set(0,0,0,0),t.isRenderGroupRoot?e.applyMatrix(t.renderGroup.localTransform):e.applyMatrix(t.renderGroup.worldTransform),e}}),r("7H3Wm",function(e,i){t(e.exports,"getGlobalRenderableBounds",()=>r);function r(t,e){e.clear();let i=e.matrix;for(let i=0;i<t.length;i++){let r=t[i];r.globalDisplayStatus<7||(e.matrix=r.worldTransform,r.addBounds(e))}return e.matrix=i,e}});
//# sourceMappingURL=browserAll.356f161c.js.map
